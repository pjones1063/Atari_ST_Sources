<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>Documentation VISION (LDV) : Defines</title>
</head>

<body background="images/conc2.gif" bgcolor="#FFFFFF">
<div align="center"><center>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" width="17%"><a href="descrip.htm"><img
        src="images/cprev.jpg" alt="Chapitre précédent"
        border="0" hspace="2" width="46" height="26"></a><a
        href="index.htm"><img src="images/csom.jpg"
        alt="Retour au sommaire" border="0" hspace="2" width="26"
        height="26"></a><a href="struct.htm"><img
        src="images/csuiv.jpg" alt="Chapitre suivant" border="0"
        hspace="2" width="43" height="26"></a></td>
        <td align="center" valign="top" rowspan="2" width="8%"><p
        align="center"><img src="images/icoprinc.gif" width="59"
        height="71"></p>
        </td>
        <td width="33%"><p align="center"><font color="#0000FF"
        size="5"><strong>Documentation </strong><em><strong>VISION
        (LDV)</strong></em></font></p>
        </td>
        <td align="center" valign="top" rowspan="2" width="8%"><p
        align="center"><img src="images/icointro.gif" width="59"
        height="71"></p>
        </td>
        <td valign="top" width="17%"><p align="left">Dernière
        mise à jour : <!--webbot bot="Timestamp" startspan
        s-type="EDITED" s-format="%d/%m/%y" -->24/07/01<!--webbot
        bot="Timestamp" i-checksum="12454" endspan --></p>
        </td>
    </tr>
    <tr>
        <td width="17%"><p align="center"><a
        href="..\..\download/dvldv.zip">Télécharger la doc</a></p>
        </td>
        <td width="33%"><p align="center"><font size="4"><strong>4.
        D E F I N E S</strong></font></p>
        </td>
        <td align="center" width="17%">&nbsp; <!--webbot
        bot="HTMLMarkup" startspan --><A HREF="http://www.estat.com/getstats?serial=1390118421">
<IMG SRC="http://perso.estat.com/cgi-bin/perso/1390118421?page=DocVisionLDV"
BORDER=0></A>
<!--webbot
        bot="HTMLMarkup" endspan --></td>
    </tr>
</table>
</center></div>

<hr>

<p><a name="LDV_STATUS"></a><font size="4"><strong>4.1 Type de
code de retour</strong></font></p>

<p><font size="4"><strong>typedef long LDV_STATUS</strong></font></p>

<p><font size="3">Le type de code de retour des fonctions LDV est
un entier 32 bits. Pourquoi ? Tout d'abord parce que certains
compilateurs (GCC par exemple) retournent un entier 32 bits même
si on spécifie une entier 16 bits (short). Ensuite, cela permet
de prévoir une extension du code de retour, pour une évolution
future, dans les bits restant.</font></p>

<p>&nbsp;</p>

<p><a name="ELDV"></a><font size="4"><strong>4.2 Codes de retour</strong></font></p>
<div align="center"><center>

<table border="2" width="100%">
    <tr>
        <td align="center" width="10%"><strong>Define</strong></td>
        <td align="center" width="75%"><strong>Description</strong></td>
    </tr>
    <tr>
        <td align="center" width="10%">ELDV_NOERROR</td>
        <td width="75%">Pas d'erreur. La fonction a fonctionné
        correctement</td>
    </tr>
    <tr>
        <td align="center" width="10%">ELDV_INVALIDPARAMETER</td>
        <td width="75%">Au moins un des paramètres est invalide</td>
    </tr>
    <tr>
        <td align="center" width="10%">ELDV_NBPLANESNOTSUPPORTED</td>
        <td width="75%">La fonction ne supporte pas le nombre de
        plans passé en paramètre</td>
    </tr>
    <tr>
        <td align="center">ELDV_NOTENOUGHMEMORY</td>
        <td>Mémoire insuffisante</td>
    </tr>
    <tr>
        <td align="center">ELDV_PREVIEWNOTSUPPORTED</td>
        <td>La fonction Preview n'est pas définie (pointe sur
        NULL)</td>
    </tr>
    <tr>
        <td align="center">ELDV_RUNNOTSUPPORTED</td>
        <td>La fonction Run n'est pas définie (pointe sur NULL).
        Je me demande bien qui serait suffisamment naze pour
        écrire un LDV ne faisant rien !</td>
    </tr>
    <tr>
        <td align="center">ELDV_BADVAPIVERSION</td>
        <td>La version de <a href="vapi/index.htm#Présentation">VAPI</a>
        disponible ne permet pas d'utiliser le LDV (il manque
        certaines fonctions ou interfaces)</td>
    </tr>
    <tr>
        <td align="center">ELDV_IMGFORMATMISMATCH</td>
        <td>Les formats d'images gérés par le LDV ne permettent
        pas à <em><strong>VISION</strong></em> de fournir une
        image compatible avec un des formats attendus. Cela est
        à priori une erreur du LDV.</td>
    </tr>
    <tr>
        <td align="center">ELDV_CANCELLED</td>
        <td>L'opération en cours a été annulée par
        l'utilisateur</td>
    </tr>
    <tr>
        <td align="center">ELDV_GENERALFAILURE</td>
        <td>Echec général, raison non précisée</td>
    </tr>
</table>
</center></div>

<p>Ces codes peuvent être renvoyés par les fonctions du LDV ou
par <em><strong>VISION</strong></em> vers l'utilisateur afin
d'afficher le message d'erreur correspondant. Pensez aussi à
utiliser la macro LDV_SUCCESS qui vous indique si le code passé
en paramètre correspond à un succes ou une erreur.</p>

<p>&nbsp;</p>

<p><a name="TLDV"></a><font size="4"><strong>4.3 Types de modules</strong></font></p>
<div align="center"><center>

<table border="2" width="100%">
    <tr>
        <td align="center" width="10%"><strong>Define</strong></td>
        <td align="center" width="75%"><strong>Description</strong></td>
    </tr>
    <tr>
        <td align="center" width="10%">TLDV_MODIFYIMG</td>
        <td width="75%">Module modificateur d'image. Peut
        également servir à initialiser une image en écrasant
        complètement son contenu afin d'en générer une
        nouvelle, sans prendre en compte les données actuelles.</td>
    </tr>
    <tr>
        <td align="center" width="10%">TLDV_LOADIMG</td>
        <td width="75%">Module de chargement d'image. <em><strong>VISION</strong></em>
        ne le gère pas encore</td>
    </tr>
    <tr>
        <td align="center" width="10%">TLDV_SAVEIMG</td>
        <td width="75%">Module de sauvegarde d'image. <em><strong>VISION</strong></em>
        ne le gère pas encore</td>
    </tr>
</table>
</center></div>

<p>&nbsp;</p>

<p><a name="LDVF"></a><font size="4"><strong>4.4 Informations sur
les capacités</strong></font></p>
<div align="center"><center>

<table border="2" width="100%">
    <tr>
        <td align="center" width="10%"><strong>Define</strong></td>
        <td align="center" width="75%"><strong>Description</strong></td>
    </tr>
    <tr>
        <td align="center" width="10%">LDVF_STDFORMAT</td>
        <td width="75%">Le LDV accepte le format image standard
        défini par ATARI (bit-plans à la suite les uns des
        autres). Ce format n'est pas valable en True Color.</td>
    </tr>
    <tr>
        <td align="center" width="10%">LDVF_ATARIFORMAT</td>
        <td width="75%">Le LDV accepte le format ATARI (bit-plans
        entrelacés (ST), modes True Color du Falcon)</td>
    </tr>
    <tr>
        <td align="center">LDVF_SPECFORMAT</td>
        <td>Le LDV accepte le format spécifique de la carte
        graphique</td>
    </tr>
    <tr>
        <td align="center">LDVF_SUPPORTPREVIEW</td>
        <td>Le LDV fournit la fonction Preview (fortement
        conseillé même si elle appelle Run)</td>
    </tr>
    <tr>
        <td align="center">LDVF_AFFECTPALETTE</td>
        <td>Le LDV modifie la palette (modes bit-plans
        uniquement). En ce cas, l'opération sur la palette doit
        toujours se faire &quot;sur place&quot;. <em><strong>VISION</strong></em>
        sauvegardera systématiquement la palette de l'image dans
        le tampon undo.</td>
    </tr>
    <tr>
        <td align="center">LDVF_SUPPORTPROG</td>
        <td>Le LDV appellera la fonction <a
        href="vapi/pr.htm#PrSetProg">PrSetProg</a> de l'interface
        <a href="vapi/index.htm#Présentation">VAPI</a>
        (conseillé si le traitement dure plus de 2 secondes).
        Avant d'appeler <a href="descrip.htm#run">Run</a>, <em><strong>VISION</strong></em>
        affichera une fenêtre de progression pour le LDV et la
        fera disparaitre ensuite. En appelant <a
        href="vapi/pr.htm#PrSetProg">PrSetProg</a> de l'interface
        <a href="vapi/index.htm#Présentation">VAPI</a>, le LDV
        pourra informer l'utilisateur de la progression du
        traitement.</td>
    </tr>
    <tr>
        <td align="center">LDVF_OPINPLACE</td>
        <td>Le LDV sait travailler sur l'image source, sans que <em><strong>VISION</strong></em>
        alloue la destination (on dit que la transformation se
        fait sur place). En ce cas, le paramètre out de la
        fonction <a href="descrip.htm#run">Run</a> est le même
        que in. Dans la mesure du possible, utilisez ce flag,
        cela économise de la mémoire. La présence de ce flag
        impose évidemment que le LDV ne modifie pas la taille de
        l'image.</td>
    </tr>
    <tr>
        <td align="center">LDVF_REALTIMEPARAMS</td>
        <td>Le LDV effectue assez rapidement la fonction <a
        href="descrip.htm#run">Run</a> en mode Preview (image
        petite affichée par la boite de dialogue de <em><strong>VISION</strong></em>),
        pour que la modification des paramètres du LDV par les
        ascenseurs soit suffisamment fluide (au moins 1 image par
        seconde). En ce cas, <em><strong>VISION</strong></em>
        appelera la fonction Preview lorsque l'utilisateur agira
        sur un ascenseur de contrôle de paramètre, sans que
        celui-ci soit obligé d'appuyer sur le bouton
        &quot;Pré-Viualisation&quot;</td>
    </tr>
    <tr>
        <td align="center">LDVF_SUPPORTCANCEL</td>
        <td>La fonction <a href="descrip.htm#run">Run</a> peut
        être annulée en cours d'exécution. <em><strong>VISION</strong></em>
        permet alors à la fenêtre de progression d'être
        fermée par le bouton de fermeture de fenêtre GEM
        (CLOSER) et par Control-C. Dès que le LDV supporte la
        progression, je vous conseille d'ajouter (et de gérer
        ..) ce flag, c'est bien utile et <a
        href="descrip.htm#run">pas compliqué à implémenter</a>.</td>
    </tr>
    <tr>
        <td><p align="center">LDVF_NOSELECTION</p>
        </td>
        <td>Ce LDV ne peut pas travailler sur un bloc à
        l'intérieur de l'image (sélection). En ce cas, <em><strong>VISION</strong></em>
        invalide la possibilité de spécifier la sélection lors
        de l'application du LDV.<br>
        Remarque : depuis la version 4.0e, <em><strong>VISION</strong></em>
        crée une image &quot;bloc&quot; faisant ainsi croire au
        LDV qu'il travaille sur un bloc. <em><strong>VISION</strong></em>
        replace ensuite le bloc modifié dans l'image d'origine
        sans que le LDV ait à se préoccuper des spécificités
        du travail sur un bloc. En bref, si vous ne voulez pas
        vous embêter à gérer le travail sur un bloc,
        positionnez ce flag, <em><strong>VISION</strong></em> se
        charge de tout !</td>
    </tr>
</table>
</center></div>

<p><font size="3">Ces flags sont à combiner avec le &quot;ou
logique&quot; (|).</font></p>

<p>&nbsp;</p>

<hr>
<div align="center"><center>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" width="17%"><a href="descrip.htm"><img
        src="images/cprev.jpg" alt="Chapitre précédent"
        border="0" hspace="2" width="46" height="26"></a><a
        href="index.htm"><img src="images/csom.jpg"
        alt="Retour au sommaire" border="0" hspace="2" width="26"
        height="26"></a><a href="struct.htm"><img
        src="images/csuiv.jpg" alt="Chapitre suivant" border="0"
        hspace="2" width="43" height="26"></a></td>
        <td align="center" valign="top" rowspan="2" width="8%"><p
        align="center"><img src="images/icoprinc.gif" width="59"
        height="71"></p>
        </td>
        <td width="33%"><p align="center"><font color="#0000FF"
        size="5"><strong>Documentation </strong><em><strong>VISION
        (LDV)</strong></em></font></p>
        </td>
        <td align="center" valign="top" rowspan="2" width="8%"><p
        align="center"><img src="images/icointro.gif" width="59"
        height="71"></p>
        </td>
        <td valign="top" width="17%"><p align="left">Dernière
        mise à jour : <!--webbot bot="Timestamp" startspan
        s-type="EDITED" s-format="%d/%m/%y" -->24/07/01<!--webbot
        bot="Timestamp" i-checksum="12454" endspan --></p>
        </td>
    </tr>
    <tr>
        <td width="17%"><p align="center"><a
        href="..\..\download/dvldv.zip">Télécharger la doc</a></p>
        </td>
        <td width="33%"><p align="center"><font size="4"><strong>D
        E F I N E S</strong></font></p>
        </td>
        <td valign="top" width="17%">&nbsp; </td>
    </tr>
</table>
</center></div>
</body>
</html>
