#include 	<tos.h>
#include	<ext.h>

main()
{
	char init[] = {0x23,0x00,0x40,0x23,0x40, /* Lock LCD and set CGRAM adress to 0 */
	               0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F, /* character pattern 1 */
	               0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F, /* character pattern 2 */
	               0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F, /* character pattern 3 */
	               0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F, /* character pattern 4 */
	               0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F, /* character pattern 5 */
	               0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F, /* character pattern 6 */
	               0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F, /* character pattern 7 */
	               0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F, /* character pattern 8 */
	               0x23,0xFF,0xFF};                         /* end transfer, unlock LCD */
	                         
	char send[12] = {0x20,0x01,0x20,8,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08}; /* LCD buffer 0x120 */
	char load[4] = {0x20,0x01,0x20,8};                      /* LCD buffer 0x120, 8 bytes */
	char spaces[8]  = "        ";
	int i;
	
	Ikbdws(71,init);
	while(Cconis()==0)
	{	
		for(i=0;i<8;send[4+i]=Random()&7,i++);
		Ikbdws(11,send);
		delay(100);
	}
	Ikbdws(3,load);
	Ikbdws(7,spaces);
	return(0);
}