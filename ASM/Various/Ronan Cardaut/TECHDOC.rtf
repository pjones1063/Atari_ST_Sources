{\rtf1\ansi\ansicpg1252
{\fonttbl{\f1\fnil\fcharset0\cpg1252 Modern;}
{\f2\fnil\fcharset0\cpg1252 Arial;}}
{\stylesheet{\sbasedon222\snext0 Normal;}
{\*\cs1\f2\b0\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs72\cf0 TITRE DE LA DOC;}
{\*\cs3\f2\b0\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs40\cf0 sous TITRE DE LA DOC;}
{\*\cs5\hyphpar0\f2\fs24\expnd0\kerning1\cf0 Texte normal (12);}
{\*\cs6\hyphpar0\b0\i0\ul\outl0\scaps0\strike0\uld0\nosupersub\fs36\expnd0\kerning1\cf0 Titre principal (18);}
{\*\cs9\hyphpar0\b0\i0\ul\outl0\scaps0\strike0\uld0\nosupersub\fs28\expnd0\kerning1\cf0 Sous-titre 1 (14);}
{\*\cs10\f2\b\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs48\cf0 Titre de chapitre;}
{\*\cs14\f2\b\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs16\cf0 en tete;}
{\*\cs17\hyphpar0\f1\b0\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs22\cf0 bout de code;}
{\s2\qc\sl292\slmult1\li454\ri567\tx1022 CENTRE;}
{\s4\sl292\slmult1\fi454\tx2608\tx3968\cs17\hyphpar0\f1\b0\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs22\cf0\sbasedon17 bout de code assembleur;}
{\s7\qj\sl292\slmult1\li1134\fi-567\tx567\cs5\hyphpar0\f2\fs24\expnd0\kerning1\cf0\sbasedon5 Enum\'e9ration 1;}
{\s8\sl292\slmult1\li1020\cs9\hyphpar0\b0\i0\ul\outl0\scaps0\strike0\uld0\nosupersub\fs28\expnd0\kerning1\cf0\sbasedon9 Sous-titre 1;}
{\s11\qc\sl292\slmult1\cs10\f2\b\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs48\cf0\sbasedon10 TITRE DE CHAPITRE;}
{\s12\qj\sl292\slmult1\li1701\fi-227\cs5\hyphpar0\f2\fs24\expnd0\kerning1\cf0\sbasedon5 * Liste;}
{\s13\sl292\slmult1\li454\tx2834\cs5\hyphpar0\f2\fs24\expnd0\kerning1\cf0\sbasedon5 texte normal;}
{\s15\qc\sl292\slmult1\cs14\f2\b\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs16\cf0\sbasedon14 en tete;}
{\s16\sl292\slmult1\cs14\f2\b\i0\ul0\outl0\scaps0\strike0\uld0\nosupersub\fs16\cf0\sbasedon14 pied de page;}}
{\*\generator Papyrus 12.61;}
{\info{\operator simon.osborne}
{\creatim\yr2008\mo5\dy8\hr12\min2\sec33}
{\revtim\yr2008\mo5\dy8\hr12\min3\sec38}
{\nofpages37}{\nofwords7774}{\nofchars38401}{\nofcharsws46813}}
\paperw11906\paperh16838\margl1134\margr1135\margt1134\margb1135\pgnstart1
\ftntj\ftnrestart\facingp\margmirror\makeback
\sectd\pgndec\headery1134\footery1135\cols1\colsx720\pgndec
\qr\sl292\slmult1\cs5\f2\fs24 Auteurs : Ronan Cardaut & St\'e9phane Barr\'e9\par
\'a91999 Class4\par
\pard\qc\sl292\slmult1\plain\f2\fs72\par
\par
\par
\pard\s2\qc\sl292\slmult1\li454\ri567\tx1022\cs1\b CENTINEL\par
\b0\fs40\par
\par
\cs3 Le d\'e9bogueur 68060/56301 du PHENIX\cs1\par
\par
\par
version 1.0\par
ao\'fbt 1999\par
\par
\par
\par
\par
\par
\pard\sl292\slmult1\li454\ri567\tx1022\par
\par
\fs28 CLASS4\par
42 rue Delegorgue\par
62970 Courcelles les Lens\fs40\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 SOMMAIRE\par
\pard\qj\sl292\slmult1\fi907\cs5\b0\fs24\par
\plain\f2\fs36\par
\par
\par
Avant propos\par
Remerciements\par
\par
I. Introduction\par
II. Les touches de fonctions\par
III. \'c9valuateur\par
IV. Les points d'arr\'eat\par
V. Les registres internes\par
VI. Les fen\'eatres\par
VII. Description des fonctions principales\par
VIII. Les menus d\'e9roulants\par
IX. Le d\'e9bogage au niveau source\par
X. Quelques exemples pratiques\par
\par
Annexe A : Explications techniques\par
Annexe B : Le fichier de configuration\cs10\b\fs48\page
\pard\s11\qc\sl292\slmult1 Remerciements\par
\pard\qc\sl292\slmult1\cs5\b0\fs24\par
\pard\qj\sl292\slmult1\li454\fi-454 Les auteurs tiennent \'e0 remercier les personnes suivantes :\par
\par
\pard\qj\sl292\slmult1\li454\bullet  Patrice, pour l'aide et les conseils qu'il nous a apport\'e9s pendant le d\'e9veloppement 
de CENTinel et aussi pour avoir g\'e9n\'e9reusement pr\'eat\'e9 son Falcon.\par
\par
\bullet  Les membres du club Atari de Quimper pour leur soutien permanent.\par
\par
\bullet Tous les membres des groupes EXA et ADR\'c9NALINE desquels nous avons et 
continuons encore \'e0 faire partie.\par
\par
\bullet  Les autres membres de CLASS4 : Alain, Christophe, David, Dominique, France, 
Herv\'e9,  Rodolphe, Sacha, Thomas.\par
\par
\bullet  Tous nos amis qui croient \'e0 notre projet et qui nous soutiennent tous les jours :\par
Sophie, R\'e9gis, Pascal, Laurent, Aur\'e9lie, Anthony, C\'e9line, Jo\'ebl et toute sa famille, 
Jean-Pierre, Ren\'e9, St\'e9phane, Henri, Charles, Fran\'e7ois, Alain, Micka\'ebl et bien-s\'fbr tous 
les autres.\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 Avant propos\par
\pard\qj\sl292\slmult1\fi454\cs5\b0\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 La documentation qui va suivre, suppose d\'e9j\'e0 une bonne connaissance en 
assembleur 680x0 et 56x01. Pour ceux d'entre vous qui d\'e9butent, nous vous 
conseillons de commencer par lire l'annexe A qui explique les notions de bases sur le 
fonctionnement d'un d\'e9bogueur.\par
\par
Ce conseil s'applique aussi aux personnes qui se disent "comp\'e9tentes", puisque le 
fonctionnement du d\'e9bogueur est expliqu\'e9 simplement, ce qui permet de comprendre 
les causes de plantages qui peuvent survenir et qui ne sont pas une cons\'e9quence du 
mauvais fonctionnement de celui-ci, mais plut\'f4t d'un manque de connaissances de 
son fonctionnement. CENTinel offre des outils puissants pour palier \'e0 ces plantages, 
mais encore une fois avant de pouvoir les utiliser, il faut comprendre comment ils 
marchent!\par
\par
\par
Ceci \'e9tant dit, entrons dans le vif du sujet ! \page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 Introduction\-\-\par
\pard\qj\sl292\slmult1\fi227\cs5\b0\fs24\par
Lors de la sortie du Falcon, aucun outil de d\'e9veloppement efficace n'a \'e9t\'e9 livr\'e9 avec cet 
ordinateur. Pour \'e9viter de refaire cette erreur, nous avons d\'e9cid\'e9 de concevoir un 
d\'e9bogueur qui serait enti\'e8rement pens\'e9 pour coller au hardware du Ph\'e9nix. C'est dans 
cette optique que CENTinel a \'e9t\'e9 \'e9crit. CENTinel va remplacer plusieurs d\'e9bogueurs par 
un seul! (qui n'a jamais voulu avoir ses programmes DSP et 680x0 \'e0 l\rquote\'9cil en m\'eame temps 
?)\par
Voici une liste non exhaustive de toutes ses caract\'e9ristiques :\par
\par
\pard\s12\qj\sl292\slmult1\li1701\fi-227\bullet  Reconna\'eet le 680x0, le 56301, le 68360.\par
\bullet  Permet de m\'e9langer les fen\'eatres de d\'e9bogage !\par
\bullet  Tr\'e8s bas niveau (il colle au hard).\par
\bullet  Possibilit\'e9 de d\'e9boguer au niveau source.\par
\bullet  Utilisation judicieuse des couleurs pour une tr\'e8s bonne visualisation.\par
\bullet  Un \'e9valuateur tr\'e8s puissant.\par
\bullet  Tr\'e8s grande stabilit\'e9.\par
\bullet  Prise en compte des modes graphiques \'e9tendus\par
\bullet  ...\par
\pard\qj\sl292\slmult1\fi227\par
Dans ce qui va suivre, nous avons tenu \'e0 \'eatre clair avant tout, c'est pourquoi nous 
avons \'e9vit\'e9 de d\'e9tailler \'e0 fond les commandes simples, ceci afin que cette documentation 
ne devienne pas un annuaire t\'e9l\'e9phonique, et surtout pour que vous puissiez la lire 
tranquillement jusqu'\'e0 la fin (il vaut mieux que vous connaissiez globalement toute la 
documentation plut\'f4t que seulement le premier chapitre o\'f9 vous vous seriez arr\'eat\'e9 de lire 
sinon!). Mais pas de panique, vous apprendrez \'e0 utiliser toutes les fonctionnalit\'e9s de 
CENTinel dans les exemples du chapitre X.\par
\par
Nous esp\'e9rons que CENTinel, qui est unique en son genre, vous permettra de mener 
rapidement \'e0 terme tous les programmes que vous allez concevoir sur Ph\'e9nix.\par
\par
Voici maintenant comment CENTinel est n\'e9 (Pour ceux qui ne seraient pas int\'e9ress\'e9s, 
vous pouvez tout de suite sauter au chapitre II) :\par
\par
\pard\qj\sl292\slmult1\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 Les touches de fonctions\par
\pard\s8\sl292\slmult1\li1020\cs9\b0\ul\fs28\par
\fs32 II.1. CONTROLE DU PROGRAMME\fs28\par
\pard\qj\sl292\slmult1\fi454\tx3061\cs5\ul0\fs24\par
\pard\qj\sl292\slmult1\li3061\fi-2608\tx3061\bullet  Ctrl Z\tab\b TRACE\b0  une instruction.\par
\bullet  Ctrl Q\tab\b TRACE\b0  intelligent ( ne descend pas dans les bsr, jsr, dbra ...)\par
\bullet  Ctrl U\tab Place un point d'arr\'eat sur le haut (\b UP\b0 ) de la  fen\'eatre courante 
et lance.\par
\bullet  Ctrl A\tab\b RUN&BREAK\b0 , place un point d'arr\'eat sur l'instruction suivante 
et lance.\par
\bullet  J\tab\b JUMP\b0  demande la nouvelle adresse du PC.\par
\bullet  Ctrl J\tab\b JUMP\b0  Met le PC \'e0 l'adresse de la fen\'eatre active.\par
\bullet  B\tab\b BREAKPOINT\b0  Place un point d'arr\'eat utilisateur.\par
\bullet  Ctrl B\tab\b BREAKPOINT\b0  Place un point d'arr\'eat \'e0 l'adresse de la fen\'eatre 
courante.\par
\bullet  Shift Ctrl B\tab\b BREAKPOINT\b0  Place un point d'arr\'eat permanent \'e0 l'adresse 
courante.\par
\bullet  Ctrl K\tab Efface la liste des points d'arr\'eat.\par
\bullet  T\tab\b TRACE UNTIL\b0  Trace jusqu'\'e0 expression vraie.\par
\bullet  Ctrl R\tab\b RUN\b0  Lance le programme.\par
\bullet  R\tab\b RUN\b0  Lance le programme.\par
\bullet  Ctrl T\tab\b TRACE ALL\b0  Trace mais rentre dans les exceptions.\par
\bullet  Ctrl S\tab\b SAUTE\b0  l'instruction courante.\par
\bullet  Ctrl D\tab\b DETOURNE\b0  une exception.\par
\bullet  Shift Ctrl D\tab\b DETOURNE\b0  de mani\'e8re permanente une exception.\par
\bullet  Alt Ctrl D\tab Arr\'eate de \b DETOURNER \b0 les exceptions. \par
\bullet  Ctrl F\tab\b FORCE\b0  le branchement.\par
\bullet  Ctrl Alt V\tab\b VBR\b0  D\'e9cale/Replace le VBR.\par
\bullet  Shift Alt #\tab\b RESIDENT\b0  Rend CENTinel r\'e9sidant.\par
\bullet  W \tab\b WATCH\b0  Pointe la fen\'eatre sur l'adresse contenue dans 
l'instruction.\par
\bullet  V\tab\b VIEW\b0  voir l\rquote\'e9cran du programme.\par
\bullet  Shift V\tab\b VIEW\b0  Identique \'e0 V mais replace le sr du programme...\par
\bullet  Ctrl V\tab\b VIEW\b0  Identique \'e0 V mais replace l'\'e9cran \'e0 \{$44e\}.\par
\bullet  Shift Alt Help\tab Interrompt un programme 6806\cs9 0.\ul\fs28\par
\cs5\ul0\fs24\bullet  Ctrl Alt Help\tab Interrompt un programme DSP 56301.\cs9\ul\fs28\tab\-\par
\cs5\ul0\fs24\bullet  Ctrl P\tab Met \'e0 jours les registres \b MMU\b0  (dangereux)\par
\bullet  Ctrl Alt N\tab Met un \b NOP\b0  \'e0 l'adresse de la fen\'eatre courante\cs9\ul\fs28\page
\pard\s8\sl292\slmult1\li1020 II.2. MANIPULATION DES FENETRES\par
\pard\qj\sl292\slmult1\fi454\tx3061\cs5\ul0\fs24\par
\bullet  \u8594?\tab scroll dans la fen\'eatre vers la droite.\par
\bullet  \u8592?\tab scroll dans la fen\'eatre vers la gauche.\par
\bullet  \u8593?\tab scroll dans la fen\'eatre vers le haut.\par
\bullet  \u8595?\tab scroll dans la fen\'eatre vers le bas.\par
\par
\bullet  shift \u8594?\tab scroll dans la fen\'eatre d\rquote une page vers la droite.\par
\bullet  shift \u8592?\tab scroll dans la fen\'eatre d\rquote une page vers la gauche.\par
\bullet  shift \u8593?\tab scroll dans la fen\'eatre d\rquote une page vers le haut.\par
\bullet  shift \u8595?\tab scroll dans la fen\'eatre d\rquote une page vers le bas.\par
\par
\bullet  Alt \u8594?\tab D\'e9place la fen\'eatre vers la droite.\par
\bullet  Alt \u8592?\tab D\'e9place la fen\'eatre vers la gauche.\par
\bullet  Alt \u8593?\tab D\'e9place la fen\'eatre vers le haut.\par
\bullet  Alt \u8595?\tab D\'e9place la fen\'eatre vers le bas.\par
\par
\bullet  Shift Alt \u8594?\tab\'c9largis la fen\'eatre.\par
\bullet  Shift Alt \u8592?\tab R\'e9tr\'e9cis la fen\'eatre.\par
\bullet  Shift Alt \u8595?\tab Augmente la hauteur de la fen\'eatre.\par
\bullet  Shift Alt \u8593?\tab Diminue la hauteur de la fen\'eatre.\par
\par
\bullet  Alt Z\tab\b ZOOM\b0  passe la fen\'eatre en plein \'e9cran.\par
\bullet  A\tab\b ADRESSE\b0  met la fen\'eatre active \'e0 l'adresse voulue.\par
\bullet  TAB\tab\b PASSE\b0  \'e0 la prochaine fen\'eatre.\par
\par
\bullet  Alt L\tab\b LOCK\b0  bloque une fen\'eatre sur une expression.\par
\bullet  Alt U\tab\b UNLOCK\b0  lib\'e8re une fen\'eatre.\par
\par
\bullet  Alt N\tab\b NOUVELLE\b0  ouvre une nouvelle fen\'eatre.\par
\bullet  Alt C\tab\b CLOSE\b0  ferme la fen\'eatre active.\par
\par
\bullet  Alt S\tab\b SPLIT \b0 s\'e9pare la fen\'eatre en deux horizontalement.\par
\bullet  Shift Alt S\tab\b SPLIT \b0 s\'e9pare la fen\'eatre en deux verticalement.\par
\bullet  Alt F\tab\b FUSE\b0  r\'e9unit deux fen\'eatres horizontalement.\par
\bullet  Shift Alt F\tab\b FUSE\b0  r\'e9unit deux fen\'eatres verticalement.\par
\par
\bullet  Ctrl 0~9 \tab Pointe la fen\'eatre sur un registre d\rquote adresse.\par
\bullet  Shift Ctrl 0~7\tab Pointe la fen\'eatre sur un registre de donn\'e9es.\par
\bullet  Ctrl Alt 0~9\tab Pointe la fen\'eatre sur le contenu du registre d'adresse.\par
\par
\bullet  Alt 0~9 (pav num)\tab active une fen\'eatre entre 0 et 9.\par
\bullet  Shift Alt 0~9\tab active une fen\'eatre entre 10 et 19.\par
\bullet  Ctrl Alt 0~9\tab active une fen\'eatre entre 20 et 29.\par
\par
\bullet  1~8 (pav\'e9 num)\tab Change le \b TYPE\b0  de fen\'eatre (680x0). \par
\bullet  Ctrl 1~8 (pav\'e9 num)\tab Change le \b TYPE\b0  de fen\'eatre (DSP).\par
\par
\bullet  Ctrl (\tab M\'e9moire P du DSP.\par
\bullet  Ctrl )\tab M\'e9moire X du DSP.\par
\bullet  Ctrl /\tab M\'e9moire Y du DSP.\par
\cs9\ul\fs28\par
\cs5\ul0\fs24\bullet  +\tab Avance dans la fen\'eatre des sources.\cs9\ul\fs28\page
\pard\s8\sl292\slmult1\li1020 II.3. COMMANDES DIVERSES\par
\pard\qj\sl292\slmult1\fi454\tx3061\cs5\ul0\fs24\par
\bullet  Undo\tab\b RESET\b0  du clavier.\par
\bullet  F10\tab\b MENU\b0  Active le menu d\'e9roulant.\par
\par
\bullet  D\tab\b DIRECTORY\b0  Change le directory courant.\par
\bullet  Alt D\tab\b DISPLAY DIRECTORY\b0  Affiche le directory courant.\par
\bullet  L\tab\b LOAD BINARY\b0  Charge en binaire.\par
\bullet  S\tab\b SAVE BINARY\b0  Sauve en binaire.\par
\bullet  Ctrl C\tab\b Quitte\b0  le programme.\par
\bullet  Ctrl L\tab\b LOAD\b0  Charge un programme.\par
\bullet  Ctrl O\tab\b LOAD\b0  SYM RES : charge des symboles s'ils sont r\'e9sident.\par
\bullet  Ctrl Shift L\tab\b LOAD SYM\b0  Charge une table de symboles.\par
\bullet  Alt E\tab\b EDITEUR\b0  modifie le contenu de la fen\'eatre.\par
\bullet  E\tab\b EVALUATEUR\b0  Appelle l'\'e9valuateur.\par
\bullet  Clr Home\tab Efface la ligne en cours d'\'e9dition.\par
\bullet  F\tab\b FILL\b0  Remplit la m\'e9moire.\par
\bullet  G\tab\b GET\b0  Cherche une cha\'eene hexa ou ascii en avant.\par
\bullet  Shift G\tab\b GET\b0  Cherche une cha\'eene hexa ou ascii en arri\'e8re.\par
\bullet  N\tab\b Recherche\b0  encore le suivant.\par
\bullet  Shift N\tab\b Recherche\b0  encore le pr\'e9c\'e9dent.\par
\bullet  Enter\tab\b R\'e9p\'e8te\b0  la derni\'e8re commande.\par
\bullet  Ctrl E\tab\b Red\'e9tourne\b0  les exceptions.\par
\bullet  H\tab\b Historique\b0  des instructions trac\'e9es (8 niveaux).\par
\bullet  Ctrl Alt del\tab Reset \'e0 chaud.\par
\bullet  Ctrl Alt Shift del\tab Reset \'e0 froid.\par
\bullet  Alt A\tab\b ASSEMBLAGE\b0  en ligne.\par
\bullet  F7\tab Menu des MACROs.\par
\bullet  Help\tab Temps R\'e9el.\par
\bullet  M\tab Voir la liste des points d'arr\'eat.\par
\bullet  F8\tab Appelle le s\'e9lecteur de fichier.\par
\bullet  F9\tab Rafra\'eechit les fen\'eatres\par
 \par
\pard\qj\sl292\slmult1\tx3061\tab\page
\par
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 III. L'\'e9valuateur\par
\pard\qj\sl292\slmult1\fi454\tx3061\cs5\b0\fs24\par
L'\'e9valuateur est avec la gestion des fen\'eatres, la partie la plus technique et la plus 
importante du d\'e9bogueur. C'est pourquoi, nous lui consacrons une partie enti\'e8re. En effet, 
presque toutes les fonctions font appel \'e0 l'\'e9valuateur pour simplifier ou convertir les 
expressions. Celui de CENTinel fonctionne en 64 bits, et g\'e8re aussi bien les entiers que 
les nombres flottants (indispensable pour une utilisation courante avec les registres du 
DSP !). Nous commencerons donc par une description des principales fonctions.\par
\par
\plain\f2\fs24\bullet\cs5  Les 4 op\'e9rations \'e9l\'e9mentaires :\par
\pard\qj\sl292\slmult1\fi454\tx3061\tx4762\tab\bullet  +\tab addition\par
\tab\bullet  - \tab diff\'e9rence\par
\tab\bullet  *\tab multiplication\par
\tab\bullet  / \tab division\par
 sont bien-s\'fbr g\'e9r\'e9es, avec leur ordre de priorit\'e9 respectives.\par
\pard\qj\sl292\slmult1\fi454\tx3061\par
\plain\f2\fs24\bullet\cs5  Les op\'e9rateurs logiques : \par
\pard\qj\sl292\slmult1\fi454\tx3061\tx4762\tab\bullet ^ \tab ou exclusif\par
\tab\bullet  |\tab ou\par
\tab\bullet  &\tab et\par
\tab\bullet !\tab non\par
et les diff\'e9rentes combinaisons sont aussi g\'e9r\'e9es.\par
\par
\plain\f2\fs24\bullet  \cs5 Les op\'e9rateurs de comparaisons :\par
\tab\bullet ==\tab\'e9galit\'e9\par
\tab\bullet <=\tab inf\'e9rieur ou \'e9gal (not\'e9 aussi =<)\par
\tab\bullet =>\tab sup\'e9rieur ou \'e9gal (not\'e9 aussi >=)\par
\tab\bullet >\tab sup\'e9rieur strict\par
\tab\bullet <\tab inf\'e9rieur strict\par
et les diff\'e9rentes combinaisons. Il faut bien noter que l'\'e9valuateur renvoie :\par
\tab\bullet 1\tab si le r\'e9sultat est vrai\par
\tab\bullet 0\tab si non \par
\par
\plain\f2\fs24\bullet\cs5  L'op\'e9rateur d'affectation :\par
\tab\bullet =\tab affecte\par
\plain\f2\fs24\bullet\cs5  Les parenth\'e8ses qui permettent de choisir les priorit\'e9s du calcul\par
\tab\bullet exemple 2+3*2=8\par
\tab\bullet alors que (2+3)*2=10\par
\par
\plain\f2\fs24\bullet\cs5  Les accolades qui sont les op\'e9rateurs d'indirection\par
\tab\bullet exemple \{4\} donne comme r\'e9sultat $e00030\par
\par
\plain\f2\fs24\bullet\cs5  On peut derri\'e8re chaque objet pr\'e9ciser la taille d\'e9sir\'e9e. Cela marche aussi bien 
derri\'e8re un nombre que derri\'e8re un op\'e9rateur ou un label. Il en r\'e9sulte que l'\'e9valuateur 
prendra alors la taille indiqu\'e9e pour effectuer le calcul alors que sans sp\'e9cification, c'est la 
taille en long qui est prise par d\'e9faut pour les registres 680x0.\par
\tab\bullet exemple \{4\} donne $e00030\par
\tab\bullet alors que \{4\}.w donne $e0\par
\par
\plain\f2\fs24\bullet\cs5  Nous avons aussi inclus un registre interne 'e' ou 'E' qui contient le dernier r\'e9sultat 
\'e9valu\'e9. C'est l'\'e9quivalent du Last sur HP ou du Ans sur CASIO. Ceci permet de r\'e9utiliser 
le r\'e9sultat pour une autre \'e9valuation.\par
\tab\bullet exemple 2*3 donne 6\par
\tab\bullet puis e*3 donne 18 (c'est bien-s\'fbr le r\'e9sultat 6*3)\par
\par
\plain\f2\fs24\bullet\cs5  Les registres reconnus par l'\'e9valuateur sont les suivants\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx3061\tx4762\b\tab\plain\f2\b\fs24\bullet\cs5  C\'f4t\'e9 680x0\b0\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx3061\tx5555\tab\tab\bullet d0..d7\tab registres de donn\'e9es.\par
\tab\tab\bullet a0..a6\tab registres d'adresse.\par
\tab\tab\bullet sr\tab registre d'\'e9tat.\par
\tab\tab\bullet ssp\tab pile superviseur.\par
\tab\tab\bullet usp\tab pile utilisateur.\par
\tab\tab\bullet msp\tab pointeur sur pile ma\'eetre.\par
\tab\tab\bullet pc\tab compteur programme.\par
\pard\qj\sl292\slmult1\li5555\fi-5102\tx1927\tx3061\tx5555\tab\tab\bullet\b sp (ou a7)\tab pointeur de pile courante ( donc 
ssp ou usp).\b0\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx3061\tx5555\tab\tab\bullet cacr\tab registre du cache.\par
\tab\tab\bullet tous les registres de la mmu.\par
\tab\par
\b\tab\plain\f2\b\fs24\bullet\cs5  C\'f4t\'e9 56x01\b0\par
\tab\tab\bullet r0..r7\tab registres d\rquote adresse.\par
\tab\tab\bullet n0..n7\tab registres d\rquote offset.\par
\tab\tab\bullet m0..m7\tab registres modulo.\par
\tab\tab\bullet x0, x1, y0, y1\tab registres de donn\'e9es g\'e9n\'e9raux.\par
\tab\tab\bullet a2, a1, a0, b2, b1, b0\tab registres de donn\'e9es.\par
\tab\tab\bullet a, b\tab accumulateurs.\par
\tab\par
\b\tab\plain\f2\b\fs24\bullet\cs5  C\'f4t\'e9 registres internes\b0\par
\tab\tab\bullet w0..w31\tab adresse des 32 fen\'eatres disponibles.\par
\tab\tab\bullet i0..i7\tab les 8 registres internes.\par
\tab\tab\bullet e\tab registre de r\'e9sultat.\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx3061\tx4762\tab\par
\pard\qj\sl292\slmult1\fi454\tx3061\tx4762 Notez bien que nous ne faisons pas la diff\'e9rence entre les majuscules et les 
minuscules pour les registres.\par
\plain\f2\fs24\par
\bullet\cs5  L'\'e9valuateur permet aussi de convertir dans les trois bases courantes\par
\tab\bullet  En hexad\'e9cimal (valeur pr\'e9c\'e9d\'e9e de $ ou rien)\par
\tab\bullet  En d\'e9cimal (valeur pr\'e9c\'e9d\'e9e de \\)\par
\tab\bullet  En binaire (valeur pr\'e9c\'e9d\'e9e de %)\par
\par
Il faudra faire attention lorsque, par exemple vous \'e9valuerez a0. En effet, a0 existe 
aussi bien au niveau du DSP que du 680x0, donc l'\'e9valuateur regardera quelle est la 
fen\'eatre active et selon son type DSP ou 680x0, il \'e9valuera le registre qu'il faut. 
N\'e9anmoins, il se peut que vous vouliez par exemple la valeur du PC du 680x0 alors que 
vous \'eates dans une fen\'eatre DSP. Dans ce cas, il faudra taper 6pc \'e0 la place de pc. De la 
m\'eame mani\'e8re si vous voulez un registre par exemple sr du DSP alors que vous \'eates 
dans une fen\'eatre 680x0, il faudra taper dsr \'e0 la place de sr.\par
\b\ul Faites aussi attention si vous voulez \'e9valuer la valeur $a $b $e. En effet si vous 
ne pr\'e9c\'e9dez pas ces valeurs de '$', c'est le registre a ou b ou e qui va \'eatre pris!\b0\ul0\par
Vous avez aussi la possibilit\'e9 d'\'e9valuer un registre TEXT,BSS,DATA qui contiennent 
respectivement l'adresse de la section TEXT,BSS,DATA du programme que vous avez 
charg\'e9. Ainsi vous pouvez toujours retrouver le d\'e9but de votre programme par exemple. \page
\par
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 IV. Les points d'arr\'eat\par
\pard\qj\sl292\slmult1\fi454\tx3061\tx4762\cs5\b0\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Comme dans tout bon d\'e9bogueur, il faut des points d'arr\'eat. Ceux de CENTinel sont 
particuli\'e8rement performants. En effet en plus des points d'arr\'eat classiques, ils sont 
enti\'e8rement param\'e9trables.La syntaxe en est la suivante :\par
\pard\qj\sl292\slmult1\par
\b Adresse du point d'arr\'eat, Expression \'e0 \'e9valuer, Permanence, Exception.\b0\par
\pard\sl292\slmult1\tx1134\par
\bullet  Adresse du point d'arr\'eat : adresse \'e0 laquelle va se placer le point d'arr\'eat. Si on laisse 
cette partie vide, l'adresse sera celle de la fen\'eatre active.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\tx0\tab\bullet Expression \'e0 \'e9valuer : c'est cette expression qui donnera l'ordre \'e0 CENTinel de 
s'arr\'eater si son \'e9valuation donne 1 c'est \'e0 dire si elle est vraie. C'est ici que l'\'e9valuateur 
donne toute sa puissance, en effet il est possible d'\'e9valuer des expression de la forme :\par
\pard\sl292\slmult1\fi454\tx2608\tab\tab\tab   \tab (d0=d7+1)&(i0=i0+1)&0\par
\pard\sl292\slmult1\tx0\bullet  Cette expression donne toujours 0 \'e0 cause du &0 de la fin, ce qui veut dire que le point 
d'arr\'eat ne sera jamais pris, mais \'e0 chaque passage sur l'instruction, l'expression sera 
\'e9valu\'e9e, ce qui signifie que d0 vaudra d7+1 et que i0 sera incr\'e9ment\'e9 de 1! Cela permet 
de savoir par exemple combien de fois on est pass\'e9 dans la boucle. Mais, on peut 
imaginer des condition bien plus compliqu\'e9es et bien plus pratique de ces points d'arr\'eat.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\tx0\tab\bullet  Permanence : dit si le point d'arr\'eat sera permanent (1) on non (rien ou 0). Si le 
point d'arr\'eat est permanent, alors chaque fois que l'on passera sur l'instruction, on 
s'arr\'eatera.\par
\pard\sl292\slmult1\fi454\tx2608\tab\par
\pard\sl292\slmult1\fi113\bullet  Exception : choisit le num\'e9ro de l'exception qui va servir \'e0 d\'e9clencher le point d'arr\'eat. 
Par d\'e9faut, on \'e0 l'exception n\'b032 (trap #0). Mais on peut choisir parmi les num\'e9ros 
suivants :\par
\pard\sl292\slmult1\fi454\tx1247\tab\tab\tab\tab\bullet  3\tab Erreur d'adresse (utilisation d'un bra.s *+1)\par
\tab\tab\tab\tab\bullet  4\tab Instruction ill\'e9gale (utilisation du illegal)\par
\tab\tab\tab\tab\bullet  32..47\tab Trap #n (sauf les trap syst\'e8mes bien s\'fbr!)\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\tab\bullet NB : si on laisse un champ vide, il est pris avec sa valeur par d\'e9faut :\par
\pard\sl292\slmult1\fi454\tx2608\tab\tab\tab\tab\bullet Adresse : adresse de la fen\'eatre active\par
\tab\tab\tab\tab\bullet Expression : aucune\par
\tab\tab\tab\tab\bullet Permanence : 0\par
\tab\tab\tab\tab\bullet Exception : n\'b032 (Trap #0)\par
\par
Ceci vous donne donc un petit aper\'e7u des nombreuses possibilit\'e9s d'utiliser les points 
d'arr\'eat, mais \'e9videmment, le mieux est de s'y mettre et d'essayer!\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 V. Les registres internes\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896\cs5\b0\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Dans un soucis constant de rester pratique, nous mettons \'e0 votre disposition des 
registres internes au d\'e9bogueur, qui vous rendrons d'\'e9normes services. Ces registres 
internes sont les suivants:\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896\tab\bullet  w0..w31\tab L'adresse de d\'e9but de chacunes des 31 
fen\'eatres\par
\tab\bullet  i0..i7\tab 8 registres internes multi-usages 32 bits\par
\tab\bullet  e\tab\tab Registre du dernier r\'e9sultat de l'\'e9valuateur\par
\par
\pard\s13\sl292\slmult1\li454\tx2834 Tous ces registres sont des registres 32 bit, sauf e qui lui est un registre de 64 bits car 
l'\'e9valuateur travaille en 64 bits. Comme nous l'avons d\'e9j\'e0 vu, le registre e est un 
registres qui sera extr\'eamement pratique lors d'une \'e9valuation en plusieurs \'e9tapes.\par
Tous les registres internes peuvent \'eatres utilis\'e9s de la m\'eame mani\'e8re que les autres 
registres sans aucune limitation, on peut par exemple les utiliser dans les points 
d'arr\'eat conditionnels ou les verrouillage de fen\'eatres (voir le \'a7 suivant), on peut y 
stocker des valeurs interm\'e9diaires et bien d'autres choses. Vous les trouverez dans le 
bas de la fen\'eatre de registres.\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 VI. Les fen\'eatres\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896\cs5\b0\fs24\par
Nous attaquons ici une partie aussi importante que celle de l'\'e9valuateur qui a fait 
l'objet de soins tout particuliers. En effet, pour pouvoir afficher ce qui se passe, il faut 
pouvoir afficher diverses informations. Notre d\'e9bogueur \'e9tant un d\'e9bogueur tr\'e8s bas 
niveau, nous ne pouvons pas nous permettre d'utiliser des fen\'eatres DOLMEN qui 
interf\'e9reraient avec \'e9ventuellement votre programme qui lui aussi aura besoin de fen\'eatres! 
C'est pourquoi nous avons \'e9t\'e9 amen\'e9 \'e0 d\'e9velopper notre propre syst\'e8me de fen\'eatres, 
dont les caract\'e9ristiques sont les suivantes.\par
\tab\tab\bullet  Jusqu'\'e0 32 fen\'eatres simultan\'e9ment.\par
\tab\tab\bullet  Librement positionnables (sauvegardable !).\par
\tab\tab\bullet  Dimensions totalement param\'e9trables.\par
\par
Toutes les manipulations de fen\'eatres se faisant  au clavier, nous avons adopt\'e9 une 
certaine logique dans l\rquote utilisation des touches pour que tout soit plus facile \'e0 retenir. Ainsi, 
les fonctions concernant les fen\'eatres utilisent la touche "alternate" \'e9ventuellement en 
combinaison avec "shift". De meme, une commande est destin\'e9e au DSP si Control est 
enfonc\'e9e et destin\'e9e au 68040 sinon.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\li2608\fi-2154\tx2608\bullet\b  Tab\b0  :\tab Passer \'e0 la fen\'eatre suivante. Vous permet de s\'e9lectionner la 
fen\'eatre qui vous int\'e9resse.\par
\bullet\b  Alt 0...9 \b0 :\tab Active une fen\'eatre entre 0 et 9. Le chiffre doit \'eatre saisi au pav\'e9 
num\'e9rique. La fen\'eatre du n\'b0 correspondant devient la fen\'eatre 
active.\par
\bullet\b  Shift Alt 0...9\b0  :\tab Active une fen\'eatre entre 10 et 19 . Le chiffre doit \'eatre saisi au 
pav\'e9 num\'e9rique. La fen\'eatre du n\'b0 correspondant devient la 
fen\'eatre active.\par
\bullet\b  Ctrl Alt 0...9\b0  :\tab Active une fen\'eatre entre 20 et 29 . Le chiffre doit \'eatre saisi au 
pav\'e9 num\'e9rique. La fen\'eatre du n\'b0 correspondant devient la 
fen\'eatre active.\par
\bullet\b  Shift Ctrl alt 0...1\b0  :\tab Active la fen\'eatre 30 ou 31 . Le chiffre doit \'eatre saisi au pav\'e9 
num\'e9rique. La fen\'eatre du n\'b0 correspondant devient la fen\'eatre 
active. Vous allez s\'fbrement remarquer que la pratique de ce 
racourci clavier va nettement am\'e9liorer votre dext\'e9rit\'e9... mais 
avez vous vraiment besoin de 32 fen\'eatres ?\par
\bullet\b  Alt  \u8593? \u8595? \u8592? \u8594?\b0  :\tab D\'e9placement de la fen\'eatre active. Les fen\'eatres ne peuvent sortir 
de l\rquote\'e9cran\par
\bullet\b  Shift Alt  \u8593? \u8595? \u8592? \u8594?\b0  : Redimensionnement de la fen\'eatre active. Une fen\'eatre ne peut 
\'eatre agrandie pour sortir de l\rquote\'e9cran. \par
\bullet\b  Alt S\b0 (plit) :\tab D\'e9doublement vertical de la fen\'eatre active. La fen\'eatre active est 
d\'e9coup\'e9e en deux fen\'eatres  superpos\'e9es et de m\'eame type. Cette 
commande n\rquote est possible que si la fen\'eatre active est assez haute, 
c\rquote est a dire qu\rquote elle occupe au moins 6 lignes.\par
\bullet\b  Shift Alt S\b0 (plit) :\tab D\'e9doublement horizontal de la fen\'eatre active. La fen\'eatre active 
est d\'e9coup\'e9e en deux fen\'eatres juxtapos\'e9es et de m\'eame type. 
Comme pour la commande pr\'e9c\'e9dente, la fen\'eatre active doit \'eatre 
assez large pour pouvoir la d\'e9doubler, elle doit donc occuper au 
moins 6 colonnes.\par
\bullet\b  Alt F\b0 (usion) :\tab Fusion verticale de deux fen\'eatres. La fen\'eatre situ\'e9e en dessous 
ou au dessus (dans cet ordre) va \'eatre fusionn\'e9e avec la fen\'eatre 
active. Le type de la fen\'eatre r\'e9sultant de cette fusion sera le type 
de la fen\'eatre active et elle occupera l\rquote espace des deux anciennes 
fen\'eatres. Pour pouvoir utiliser cette commande, une fen\'eatre de 
m\'eame largeur et ayant un bord en commun avec la fen\'eatre active 
doit exister \'e0 l\rquote\'e9cran.\par
\bullet\b  Shift Alt F\b0 (usion) :\tab Fusion horizontale de deux fen\'eatres. La fen\'eatre situ\'e9e \'e0 droite 
ou \'e0 gauche (dans cet ordre) va \'eatre fusionn\'e9e avec la fen\'eatre 
active. Le type de la fen\'eatre r\'e9sultant de cette fusion sera le type 
de la fen\'eatre active et elle occupera l\rquote espace des deux anciennes 
fen\'eatres. Pour pouvoir utiliser cette commande, une fen\'eatre de 
m\'eame hauteur et ayant un bord en commun avec la fen\'eatre active 
doit exister \'e0 l\rquote\'e9cran.\par
\bullet\b  Alt N\b0 (ew) :\tab Cr\'e9e une nouvelle fen\'eatre. Notez bien qu\rquote un espace suffisant doit 
\'eatre disponible \'e0 l\rquote\'e9cran, sinon nous vous recommandons de 
redimensionner une fen\'eatre et \'e9ventuellement de la subdiviser 
quand elle atteint une taille suffisante.\par
\bullet\b  Alt C\b0 (lose) :\tab Ferme la fen\'eatre active\par
\bullet\b  Alt Z\b0 (oom) :\tab Zoom sur la fen\'eatre active. La fen\'eatre active est agrandie pour 
occuper tout l\rquote\'e9cran. Vous pouvez scroller la fen\'eatre ou passer \'e0 
la suivante, l\rquote adresse de d\'e9but d\rquote une fen\'eatre n\rquote est jamais perdue.\par
\bullet\b  Alt L\b0 (ock) :\tab Verrouille la fen\'eatre active sur une expression. Notez bien que 
vous ne pouvez plus changer l\rquote adresse de base de la fen\'eatre 
quand elle est verrouill\'e9e.\par
\bullet\b  Alt U\b0 (unlock) :\tab D\'e9verrouille une fen\'eatre. L\rquote expression sur laquelle la fen\'eatre \'e9tait 
verrouill\'e9e est perdue. \par
\bullet\b  1...5\b0  (num):\tab S\'e9lectionne un type de fen\'eatre 040 . Uniquement au pav\'e9 
num\'e9rique, vous pouvez s\'e9lectionner un nouveau type pour la 
fen\'eatre active. Les types 040 disponibles sont les suivants:\par
\pard\sl292\slmult1\li3741\fi-3288\tx2608\tx3401\tab\tab 1 : Registres 68040\par
\tab\tab 2 : D\'e9sassemblage 68040\par
\tab\tab 3 : Contenu m\'e9moire en Hexad\'e9cimal 16 bits\par
\tab\tab 4 : Contenu de la m\'e9moire en mixte Hexad\'e9cimal / ASCII 
16 bits\par
\tab\tab 5 : Contenu de la m\'e9moire en ASCII\par
\tab\tab 8 : Affichage des sources s'ils ont \'e9t\'e9 charg\'e9s\par
\pard\sl292\slmult1\li2608\fi-2154\tx2608\par
\par
\bullet\b  Ctrl 1...7 (\b0 num\b )\b0  :\tab S\'e9lectionne un type de fen\'eatre DSP . Uniquement au pav\'e9 
num\'e9rique, vous pouvez s\'e9lectionner un nouveau type pour la 
fen\'eatre active. Les types DSP disponibles sont les suivants:\par
\pard\sl292\slmult1\li3741\fi-3288\tx2608\tx3401\tab\tab 1 : Registres 56301\par
\tab\tab 2 : D\'e9sassemblage 56301\par
\tab\tab 3 : Contenu m\'e9moire en Hexad\'e9cimal 24 bits \par
\tab\tab 4 : Contenu de la m\'e9moire en mixte Hexad\'e9cimal / ASCII 
24 bits\par
\tab\tab 5 : Contenu de la m\'e9moire en fractionnel 24 bits\par
\tab\tab 6 : Contenu de la m\'e9moire L en 48 bits\par
\tab\tab 7 : Pile DSP\par
\tab\tab 8 : Affichage des sources s'ils ont \'e9t\'e9 charg\'e9s\par
\pard\sl292\slmult1\li2608\fi-2154\tx2608\tx3401\par
\pard\sl292\slmult1\li2608\fi-2154\tx2608\bullet\b  Ctrl 0...9  \b0 :\tab Pointe la fen\'eatre active sur la valeur du registre d\rquote adresse a0 \'e0 
ssp ou sur le pc(9).\par
\bullet\b  Shift Ctrl 1...8  \b0 :\tab Pointe la fen\'eatre active sur la valeur du registre de donn\'e9e d0 \'e0 
d7.\par
\bullet\b  Ctrl Alt 0...9 \b0 :\tab Pointe la fen\'eatre active sur la valeur contenu dans a0 \'e0 ssp\par
\pard\sl292\slmult1\fi454\tx2608\par
\par
Prenons comme exemple le probl\'e8me suivant : vous voulez afficher une fen\'eatre de 
registres 680x0 et de registres DSP, une fen\'eatre Hex-dump DSP & 680x0, une fen\'eatre de 
d\'e9sassemblage DSP et 680x0 alors que vous n'avez d'ouvert que 4 des 6 fen\'eatres 
voulues. Commencez par bien placer vos fen\'eatres en faisant de la place pour les 2 
prochaines, appuyez sur Alt N pour ouvrir une nouvelle fen\'eatre, choisissez son type, 
appuyez une nouvelle fois sur Alt N pour ouvrir une autre fen\'eatre et choisissez son type, 
c'est fini, c'est plus long \'e0 lire qu'\'e0 faire.\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896 Bien entendu, lorsque vous avez positionn\'e9 vos fen\'eatres, vous pouvez sauvegarder 
leurs positions en utilisant l'option save du menu d\'e9roulant.\par
Voil\'e0, vous savez tout sur les fen\'eatres alors tous \'e0  vos claviers.\par
\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 VII. Description des fonctions principales\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896\cs5\b0\fs24\par
Ce paragraphe va d\'e9crire les fonctions qui demandent le passage de param\'e8tres ou 
qui ne sont pas trop intuitives. On ne s'\'e9tendra donc pas sur les fonctions comme le trace, 
le run, les points d'arr\'eat ou d'autres fonctions qui s'expliquent d'elles m\'eames. Voyons donc 
les fonctions suivantes :\par
\par
\bullet\b  Charger binaire (L) :\b0   Cette fonction vous permettra de charger un programme non 
ex\'e9cutable en m\'e9moire (par exemple des datas). Elle demande comme param\'e8tres 
l'adresse de chargement, la longueur. Les deux param\'e8tres sont optionnels. la longueur 
permet d'indiquer le nombre d'octets que l'on souhaite lire dans un fichier. L'adresse de 
chargement permet de choisir l'adresse \'e0 partir de laquelle le fichier va \'eatre charg\'e9. 
ATTENTION : si vous sp\'e9cifiez une adresse de chargement, aucune r\'e9servation de 
m\'e9moire ne sera faite par CENTinel, donc faites bien attention \'e0 ce que vous ferez.\par
\par
\bullet\b  D\'e9tourner des exceptions (Ctrl D) :\b0  Cette fonction va vous permettre d'arr\'eater un 
programme lorsqu'il ex\'e9cutera un appel syst\'e8me d\'e9fini. Par exemple vous d\'e9sirez arr\'eater 
le programme s'il ouvre un fichier : vous tapez Ctrl D   1,3d et vous lancez. CENTinel 
s'arr\'eatera lorsque cette fonction sera appel\'e9e. Si vous ne sp\'e9cifiez pas de num\'e9ro de 
fonction, c'est toutes les fonctions correspondant au groupe qui seront d\'e9tourn\'e9es. Ainsi, 
si vous donnez 1 comme param\'e8tre, ce seront toutes les fonction GEMDOS qui seront 
d\'e9tourn\'e9es. Lorsque CENTinel s'arr\'eate, la fonction est enlev\'e9e de la liste des fonctions \'e0 
d\'e9tourner. Si vous voulez effacer une fonction dans la liste, il suffit de faire Ctrl D et de 
donner le num\'e9ro de la fonction que vous d\'e9sirez effacer. Si vous souhaitez toutes les 
effacer il suffit de faire Shift Ctrl D. Vous pouvez aussi taper le nom de la fonction 
directement. Dans ce cas, CENTinel ne tiendra pas compte des majuscules et minuscules 
et compl\'e9tera automatiquement le nom par le nom le plus proche qu'il connaisse. Un 
d\'e9tail suppl\'e9mentaire : si vous voulez d\'e9tourner une sous fonction vdi, vous devrez 
indiquer, si vous ne donnez pas son nom, en deuxi\'e8me param\'e8tre le num\'e9ro du sous 
groupe auquel elle appartient puis comme dernier param\'e8tre le num\'e9ro de la 
sous-fonction.\par
\par
\bullet\b  Trace jusqu'a (T) :\b0  Cette fonction va vous permettre de tracer jusqu'\'e0 ce que votre 
expression soit vraie. Lors de l'appel de cette fonction, on vous demande si vous d\'e9sirez 
tracer jusqu'\'e0 une certaine valeur du pc ou jusqu'\'e0 ce qu'une expression soit vraie. Cette 
distinction permet un gain de temps extraordinaire lorsque l'on trace jusqu'\'e0 une certaine 
valeur du pc (c'est le cas en ROM) par exemple.\par
\par
\bullet\b  Trace m\'eame les exceptions (Ctrl T) :\b0  Cette fonction est identique au trace, sauf 
que lorsque vous allez tracer un trap, vous rentrerez directement dans cette fonction. \par
\par
\bullet\b  Rechercher en avant (G) :\b0  Cette fonction va vous permettre de rechercher une 
cha\'eene en ascii ou en hexa \'e0 partir de l'adresse courante. La fonction recherche les 
cha\'eenes hexa au quartet pr\'e8s, c'est \'e0 dire qui si vous entrez par exemple $123, elle 
recherchera toutes les valeurs qui contiennent $123 mais pas forc\'e9ment sur un word, il se 
peut que cette cha\'eene se trouve dans $5123 par exemple. dans ce cas, la recherche 
s'arr\'eate sur $5123. Si vous voulez rechercher un nombre en long, par exemple 00000001 , 
il vous suffit de taper 1.L dans la recherche. De m\'eame vous pouvez rechercher en .w 
(word) ou .b (byte). Le nombre de caract\'e8res pour une recherche en ascii est limit\'e9 \'e0 60. 
Pour de l'hexa vous pouvez donner une cha\'eene d'une longueur maximale de 16 
caract\'e8res.\par
\par
\bullet\b  Rechercher en arri\'e8re (Shift G) : \b0 identique \'e0 la fonction pr\'e9c\'e9dente, mais la 
recherche s'effectue en arri\'e8re.\par
\par
\bullet\b  Rechercher encore en avant (N) :\b0  Cette fonction recherche en avant une cha\'eene 
d\'e9j\'e0 d\'e9finie. Si aucune cha\'eene n'a \'e9t\'e9 d\'e9finie, vous serez invit\'e9s \'e0 en d\'e9finir une.  \par
\par
\bullet\b  Rechercher encore en arri\'e8re (Shift N) :\b0  Cette fonction recherche en arri\'e8re une 
cha\'eene d\'e9j\'e0 d\'e9finie. Si aucune cha\'eene n'a \'e9t\'e9 d\'e9finie, vous serez invit\'e9s \'e0 en d\'e9finir une.  \par
\par
\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48  VIII. Les menus d\'e9roulants\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896\cs5\b0\fs24\par
Grande nouveaut\'e9, CENTinel poss\'e8de un menu d\'e9roulant, vous y trouverez toutes les 
options qui ne servent pas souvent, comme la sauvegarde des pr\'e9f\'e9rences, le 
chargement, les informations sur CENTinel et bien d'autres choses...\par
\par
L'acc\'e8s au menu se fait en appuyant sur la touche F10. Une fois le menu actif, vous 
pouvez vous d\'e9placer et s\'e9lectionner avec les fl\'e8ches et return. Pour quitter le menu, 
utilisez escape.\par
\par
\pard\s7\qj\sl292\slmult1\li1134\fi-567\tx567\b Charger, Sauver les  pr\'e9f\'e9rences: \b0 effectue une sauvegarde (ou le chargement) du 
fichier de pr\'e9f\'e9rences. Le fichier de pr\'e9f\'e9rences contient les r\'e9glages de 
CENTinel tels que la position de chaque fen\'eatre, les couleurs des diff\'e9rents 
\'e9l\'e9ments, etc. \par
\par
\pard\qj\sl292\slmult1\fi454\tx1927\tx2494\tx4762\tx5896\par
\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 IX. Le d\'e9bogage au niveau source\par
\pard\s13\sl292\slmult1\li454\tx2834\cs5\b0\fs24\par
Bien souvent, lors de la mise au point d'un programme, on aimerait bien pouvoir 
l'ex\'e9cuter directement depuis le source, ne serait-ce que pour avoir nos 
commentaires, et tous les noms de variables que l'on utilise. C'est une chose 
facilement r\'e9alisable avec CENTinel. Vous avez en effet automatiquement acc\'e8s au 
niveau source d\'e8s lors que votre programme contient les informations n\'e9cessaires.\par
Pour acc\'e9der au niveau source, il suffit apr\'e8s avoir charg\'e9 l'ex\'e9cutable de faire 8 au 
pav\'e9 num\'e9rique et le source 680x0 appara\'eet. Si vous faites Ctrl 8 c'est le source DSP 
qui appara\'eet. Une fois dans cette configuration, il suffit de choisir si vous voulez tracer 
en source ou directement en assembleur en activant la fen\'eatre de votre choix.\par
Malheureusement, les informations qui d\'e9crivent un source sont assez limit\'e9es et par 
cons\'e9quent, certains blocs seront trac\'e9s d'un coup, c'est pourquoi, vous verrez parfois 
en dessous de la ligne en cours, un bloc d'une couleur diff\'e9rente. Ceci afin de vous 
pr\'e9venir que le prochain trace va s'arr\'eater juste apr\'e8s ce bloc.\par
Sinon, vous avez acc\'e8s aux options habituelles, seulement, \'e0 la place de l'adresse, 
on vous demandera un num\'e9ro de ligne.\par
Si votre programme comporte plusieurs sources, une pression sur + ou - vous 
permettra de choisir celui que vous d\'e9sirez voir. \page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 X. Quelques exemples pratiques\par
\pard\sl292\slmult1\fi454\tx2608\cs5\b0\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Pour mieux apprendre \'e0 vous servir de CENTinel, voici quelques exemples de 
programmes, qui se trouvent sur la disquette, et que nous allons d\'e9boguer ensemble! 
Nous \'e9tudierons 3 exemples diff\'e9rents : \par
\par
\pard\s7\qj\sl292\slmult1\li1134\fi-567\tx567\tab\bullet  Un exemple enti\'e8rement 68030\par
\tab\bullet  Un exemple enti\'e8rement DSP\par
\tab\bullet  Un exemple combinant DSP&68030\par
\pard\sl292\slmult1\fi454\tx2608\par
Mais voyons sans plus attendre le premier exemple.\par
\par
\pard\s8\sl292\slmult1\li1020\cs9\ul\fs28 X.1 Exemple au 68030 \par
\pard\sl292\slmult1\fi454\tx2608\cs5\ul0\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Lancez CENTinel et chargez le programme appel\'e9 main_68.prg en faisant ctrl L\par
Normalement, vous devriez voir appara\'eetre ce qui suit :\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\s4\sl292\slmult1\fi454\tx2608\tx3968\cs17\f1\fs22 debut_du_prog\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\tab move.l\tab #$1234,d0\par
\tab move.w\tab #$fada,d1\par
\tab nop\tab\tab\par
\tab move.w\tab #$1000,d7\tab\par
\tab moveq\tab #0,d0\tab\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Arriv\'e9 ici, vous remarquez que d7=$1000, d1=fada, d0=0 ce qui est normal.\par
Utilisons maintenant la commande ctrl j qui a pour effet de mettre le pc \'e0 l'adresse de 
la fen\'eatre, si vous n'avez pas fait scroller la fen\'eatre, faites ctrl j et le pc se replacera 
sur le move.l #$1234,d0\par
Retracez 5 fois.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\s4\sl292\slmult1\fi454\tx2608\tx3968\cs17\f1\fs22 copie\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\tab addq.l\tab #1,d0\par
\tab dbra\tab d7,copie\tab\par
\tab move.w\tab #3,d7\tab\tab\tab\par
\cs5\f2\fs24\tab\par
\pard\s13\sl292\slmult1\li454\tx2834 C'est l'occasion d'utiliser la commande ctrl a lorsque le pc sera sur le dbra. Cette 
commande va placer un point d'arr\'eat sur l'instruction suivante (move.w #3,d7) et va 
lancer le programme. Lorsque vous avez ex\'e9cut\'e9 cette commande, remarquez que 
d7=$ffff, ce qui prouve bien que la boucle a \'e9t\'e9 ex\'e9cut\'e9e enti\'e8rement, d'o\'f9 un 
formidable gain de temps. Tracez une fois.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\cs17\f1\fs22\tab bne.s\tab plus_loin\tab\tab\par
\tab nop\tab\tab\par
\pard\s4\sl292\slmult1\fi454\tx2608\tx3968 plus_loin\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Vous pouvez, si vous le voulez, affecter le registre sr, faites E, et ensuite sr=304, vous 
remarquez que la fl\'e8che se remet horizontalement, preuve que le bne ne sera pas pris 
(normal car le bit Z du sr est \'e0 un). Mais si vous le voulez, vous pouvez quand m\'eame 
forcer le branchement en faisant ctrl F. Ex\'e9cutez cette commande et vous verrez le pc 
arriver au label plus_loin.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\cs17\f1\fs22\tab bsr\tab calcule\tab\tab\par
\tab bra\tab suite\tab\par
calcule\par
\tab move.w\tab #5,d0\tab\tab\tab\par
\tab move.w\tab #3,d1\par
\tab add.w\tab d0,d1\par
\tab rts\par
suite\par
\tab bsr\tab calcule\tab  \tab\par
\tab bsr\tab calcule\tab  \par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Imaginez combien cette commande est utile lorsque vous avez des sous-programmes 
peu int\'e9ressants que vous ne voudriez pas tracer mais quand m\'eame ex\'e9cuter. Cette 
commande est l\'e0 pour ca.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\cs17\f1\fs22\tab bsr\tab plus_un\tab\tab\tab\par
\tab bsr\tab plus_un\par
\tab bsr\tab plus_un\par
\tab bsr\tab plus_un\par
\tab bsr\tab plus_un\par
\tab bsr\tab plus_un\par
\tab bsr\tab plus_un\par
\tab bsr\tab plus_un\par
\tab bsr\tab plus_un\par
\tab bsr\tab plus_un\tab\tab\tab\par
\tab bra.s\tab saute\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Les points d'arr\'eat (ou break points) sont des outils fondamentaux pour la mise au 
point des programmes, car vous pouvez les poser o\'f9 vous voulez, ceci afin de passer 
les parties inint\'e9ressantes du programme, ou m\'eame pour interrompre le programme 
s'il passe \'e0 un endroit donn\'e9.\par
Tracez une fois.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\s4\sl292\slmult1\fi454\tx2608\tx3968\cs17\f1\fs22 plus_un\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\tab addq.w\tab #1,d1\tab\tab\par
\tab rts\tab\par
saute\tab\par
\tab nop\tab\tab\tab\tab\par
\tab nop\par
\tab nop\tab\par
\tab tst.b\tab $ffff8240.w\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\tab\par
\pard\s13\sl292\slmult1\li454\tx2834 CENTinel va \'e9videmment intercepter toutes les erreurs qui pourraient se produire 
durant l'ex\'e9cution d'un programme. Ici bien entendu, comme nous ne sommes pas en 
superviseur, on ne peut pas acc\'e9der \'e0 cette adresse.\par
Faites une fois Ctrl S pour passer l'instruction sans l'ex\'e9cuter.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\cs17\f1\fs22\tab clr.l\tab -(sp)\par
\tab move.w\tab #$20,-(sp)\par
\tab trap\tab #1\tab\tab\tab\par
\tab addq.l\tab #6,sp\par
\tab move.l\tab $24.w,d7\tab\par
\tab move.l\tab #TRACE,$24.w\tab\tab\par
\tab move.l\tab d7,$24.w\tab\tab\par
\tab move.l\tab d0,-(sp)\tab\tab\par
\tab move.w\tab #$20,-(sp)\par
\tab trap\tab #1\par
\tab addq.l\tab #6,sp\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\tab\par
\pard\s13\sl292\slmult1\li454\tx2834 La solution pour \'e9viter ce probl\'e8me est de mettre le vecteur trace ailleurs. C'est ce 
que nous allons faire en d\'e9calant le registre vbr. Faites Ctrl Alt v pour le d\'e9caler. 
Ensuite vous pouvez tranquillement tracer cette instruction car le vecteur trace se 
trouvera en vbr+$24. Ensuite vous pouvez replacer le vbr en faisant encore Ctrl Alt v.\par
Tracez jusqu'au moveq #0,d0\par
\pard\sl292\slmult1\fi454\tx2608\par
\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\cs17\f1\fs22\tab moveq\tab #0,d0\par
\tab clr.l\tab d1\tab\tab\tab\par
boucle\par
\tab addq.l\tab #1,d1\tab\tab\tab\par
\tab bra.s\tab boucle\tab\tab\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\tab\par
\pard\s13\sl292\slmult1\li454\tx2834 La fonction Shift Alt Help arr\'eatera la plupart de vos programmes GEM. Si CENTinel 
est r\'e9sident, sous le bureau, vous pourrez entrer dans le d\'e9bogueur quand vous 
voudrez. Un Ctrl R suffit pour ressortir. Attention parfois si vous interrompez un 
programme alors qu'il ex\'e9cute une fonction syst\'e8me, vous vous retrouverez dans la 
rom.\par
Faites Ctrl S une ou deux fois pour arriver \'e0 l'instruction suivante\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\cs17\f1\fs22\tab and.w\tab #$ff,d1\par
\tab nop\par
ajoute\par
\tab addq.w\tab #1,d0\par
\tab add.w\tab d0,d1\tab\tab\tab\par
\tab cmp.w\tab #9000,d1\tab\tab\par
\tab ble.s\tab ajoute\par
\tab nop\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\tab\par
\pard\s13\sl292\slmult1\li454\tx2834 Les points d'arr\'eat param\'e9triques sont des outils tr\'e8s int\'e9ressants pour arr\'eater vos 
programmes sous certaines conditions, ou tout simplement pour savoir le nombre de 
fois que vous \'eates pass\'e9s \'e0 un endroit. Il se peut aussi que vous vouliez vous arr\'eater 
dans une boucle, mais pas la premi\'e8re fois, et pas non plus si d0 vaut 0, encore une 
fois un point d'arr\'eat param\'e9trique va r\'e9soudre votre probl\'e8me. Leurs utilisations n'ont 
de limite que votre imagination.\par
Tracez une fois. \par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\sl292\slmult1\fi454\tx1701\tx2834\cs17\f1\fs22\tab clr.l\tab d0\tab\par
\tab move.w\tab #-100,d0\tab\par
debut\par
\tab clr.l\tab d1\par
\tab clr.l\tab d2\par
\tab move.w\tab d0,d1\par
\tab move.w\tab d0,d2\par
\tab sub.l\tab #3,d2\tab\tab\par
\tab sub.l\tab #5,d1\tab\tab\par
\tab ext.l\tab d2\tab\tab\par
\tab ext.l\tab d1\tab\par
\tab move.w\tab #$8000,d3\tab\par
encore\par
\tab move.w\tab d3,d4\tab\par
\tab muls.w\tab #7,d4\tab\tab\par
\tab cmp.l\tab d4,d2\tab\tab\tab\par
\tab beq.s\tab oui\tab\par
\tab addq.w\tab #1,d3\tab\tab\tab\par
\tab cmp.w\tab #$7fff,d3\par
\tab bne.s\tab encore\par
\tab bra.s\tab non\par
oui\par
\tab move.w\tab #$8000,d3\tab\par
encore_1\par
\tab move.w\tab d3,d4\tab\tab\tab\par
\tab muls.w\tab #11,d4\tab\par
\tab cmp.l\tab d4,d1\tab\tab\par
\tab beq.s\tab ok\tab\par
\tab addq.w\tab #1,d3\tab\par
\tab cmp.w\tab #$7fff,d3\tab\par
\tab bne.s\tab encore_1\par
non\par
\tab addq.w\tab #1,d0\tab\tab\tab\par
\tab cmp.w\tab #$7fff,d0\tab\par
\tab bne.s\tab debut\tab\tab\par
\tab illegal\par
ok\tab\par
\tab illegal\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Comme vous pouvez le constater ici, ce bout de programme est l\'e9g\'e8rement plus 
compliqu\'e9 et si on ne vous disait pas ce qu'il fait, vous auriez bien du mal \'e0 le 
d\'e9couvrir.\par
Ce programme se propose en fait de trouver une solution au probl\'e8me suivant :\par
Trouver x tel que le reste de la division de x par 7 donne 3 et le reste de la division de 
x par 11 donne 5. Autrement dit en langage math\'e9matique :\par
x\u8801?3 mod 7\tab\tab <=>\tab x-3=7k\par
x\u8801?5 mod 11\tab\tab <=>\tab x-5=11k'\par
\par
Math\'e9matiquement on trouve facilement (?) x=-39.\par
Mais, en utilisant la m\'e9thode na\'efve, c'est plus long. Le programme est divis\'e9 en deux 
parties : une s'occupe de voir s'il existe pour une valeur de x fix\'e9 k tel x-3=7k et dans 
ce cas l'autre partie regarde s'il existe k' tel que x-5=11k'. Si on a les deux conditions 
r\'e9unies, alors, on a le r\'e9sultat!\par
Dans i0, vous aurez le nombre de fois moins un o\'f9 la premi\'e8re condition a \'e9t\'e9 v\'e9rifi\'e9e 
sans que la deuxi\'e8me le soit.\par
Dans d0, on a le x qui convient, mais, il est sign\'e9, donc, pour obtenir la r\'e9ponse, on 
fait -d0.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\s4\sl292\slmult1\fi454\tx2608\tx3968\cs17\f1\fs22 TRACE\par
\tab bra.s\tab TRACE\par
\pard\sl292\slmult1\fi454\tx2608\cs5\f2\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Bien entendu vous pouvez recommencer l'op\'e9ration apr\'e8s avoir termin\'e9 le 
programme (par un Ctrl C), mais cette fois en appuyant sur la touche 8 du pav\'e9 
num\'e9rique, vous pourrez trac\'e9 au niveau source et ainsi avoir acc\'e8s aux 
commentaires que nous avons ins\'e9r\'e9s.\par
\pard\sl292\slmult1\fi454\tx2608\tab\ul\page
\pard\s8\sl292\slmult1\li1020\cs9\fs28 X.1 Exemple au DSP\par
X.1 Exemple combinant 68030&DSP\par
\pard\sl292\slmult1\fi454\tx2608\cs5\ul0\fs24\par
\par
\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 Annexe A : quelques explications 
techniques\par
\pard\sl292\slmult1\fi454\tx2608\cs5\b0\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 Disons le tout de suite, cette annexe ne sera pas un cours d'assembleur, mais plut\'f4t 
une explication simple et pr\'e9cise de ce qu'est un d\'e9bogueur et comment il marche. 
Pour ceux d'entre vous qui n'ont aucune notion d'assembleur, ils vous faudra dans un 
premier temps trouver un ouvrage qui traite ce sujet, ensuite, vous pourrez revenir \'e0 
cette annexe qui devrait alors vous para\'eetre plus claire.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\s13\sl292\slmult1\li454\tx2834 La premi\'e8re question que vous devez sans doute vous poser, est la suivante : "Je 
viens d'acqu\'e9rir CENTinel, \'e0 quoi va-t-il bien pouvoir me servir?"\par
Un d\'e9bogueur est un outil pratiquement indispensable \'e0 tout programmeur. En effet, 
lors de l'ex\'e9cution d'un programme, il se produit 3 cas : \par
\pard\s7\qj\sl292\slmult1\li1134\fi-567\tx567\tab\bullet  Le programme s'ex\'e9cute correctement.\par
\tab\bullet  Le programme fait crasher (on dit aussi planter) la machine.\par
\tab\bullet  Le programme se lance, mais ne fait pas ce que l'on veut.\par
\pard\s13\sl292\slmult1\li454\tx2834 Si vous \'eates dans le premier cas pas la peine d'utiliser CENTinel. Dans le second cas, 
CENTinel va vous aider efficacement \'e0 trouver l'endroit o\'f9 votre programme plante. 
Dans le dernier cas, CENTinel va vous permettre d'ex\'e9cuter votre programme 
instruction par instruction (on dit aussi en pas \'e0 pas) et donc de d\'e9terminer \'e0 qu'elle 
endroit il ne fait plus ce que l'on veut.\par
\'c9videmment, vous allez nous dire que l'on peut mettre des lignes comme "print" pour 
indiquer que le programme est bien pass\'e9 \'e0 certains endroits. Oui mais cette 
technique est lourde lorsque l'on \'e9crit en assembleur, et de plus elle ne vous permet 
pas de conna\'eetre l'\'e9tat exact de la machine au moment que l'on veut. De plus il ne faut 
pas oublier que le fait d'utiliser une fonction d'affichage peut ne pas marcher! En effet, 
on peut \'eatre dans une r\'e9solution bizarre, ou dans une situation o\'f9 le syst\'e8me n'est 
plus accessible (cas des jeux). D'o\'f9 la n\'e9cessit\'e9 d'utiliser un d\'e9bogueur.\par
\pard\sl292\slmult1\fi454\tx2608\par
\pard\s13\sl292\slmult1\li454\tx2834 Seulement voil\'e0, tout n'est pas aussi simple! Le fait d'utiliser CENTinel suppose 
l'ex\'e9cution simultan\'e9e et enlac\'e9e de deux programmes. Une fois sous CENTinel, 
vous allez charger le programme que vous d\'e9sirez d\'e9boguer ou observer (CENTinel 
peut aussi servir \'e0 \'e7a...).\par
Ensuite, vous aller ex\'e9cuter votre programme en pas \'e0 pas en utilisant la commande 
ctrl Z. Sous vos yeux, le pointeur programme bouge. Mais que se passe-t-il 
r\'e9ellement? En fait, dans un premier temps, avant l'appui sur la touche ctrl Z, c'est le 
programme CENTinel qui tourne. Apr\'e8s l'appui sur cette touche, les registres du 
68030&DSP sont remis \'e0 leur valeur affich\'e9e \'e0 l'\'e9cran (car pour que CENTinel tourne, 
il doit lui aussi utiliser des registres!). Puis le compteur programme est charg\'e9 avec 
l'adresse de l'instruction \'e0 ex\'e9cuter, et on lance le tout. Seulement, si on se limitait \'e0 
cela, le programme \'e0 tester se lancerait et on ne pourrait plus en avoir le contr\'f4le. 
Heureusement le 68030 met \'e0 notre disposition un mode sp\'e9cial appel\'e9 le mode 
TRACE qui g\'e9n\'e8re une exception chaque fois qu'une instruction \'e0 \'e9t\'e9 ex\'e9cut\'e9e. Cette 
exception est initialis\'e9e pour revenir dans le d\'e9bogueur. Voil\'e0, on peut d\'e8s \'e0 pr\'e9sent 
ex\'e9cuter un programme pas \'e0 pas. Mais attention, l'exception trace est plac\'e9e sur le 
vecteur $24+VBR, ce qui veut dire qui si le programme touche \'e0 cette adresse, et 
qu'ensuite on ex\'e9cute une instruction en mode trace, le processeur va sauter 
n'importe o\'f9. Il est donc important de surveiller ce vecteur $24+VBR (la plupart des 
programmes qui touchent \'e0 ce vecteur l'adressent directement en $24 sans tenir 
compte du VBR. CENTinel permet lui de d\'e9placer le VBR et donc le trace n'est plus 
en $24, mais en $24+VBR et les programmes peuvent mettre ce qu'ils veulent en 
$24...)\par
Mais, ex\'e9cuter un programme en pas \'e0 pas peut prendre beaucoup de temps! Il suffit 
d'imaginer une boucle sur d0 avec d0=$ffffffff! Pour parer \'e0 ces probl\'e8mes CENTinel 
permet de poser des points d'arr\'eat (ou break points). \'c9videmment, pour qu'un 
programme puisse s'arr\'eater o\'f9 l'on veut, il faut le modifier! Comment va-t-on 
proc\'e9der? Simplement en modifiant l'instruction sur laquelle on veut s'arr\'eater. On va la 
transformer par exemple en trap #0 (Le lecteur remarquera imm\'e9diatement que le fait 
de ne pas pouvoir modifier la ROM va emp\'eacher la pose de points d'arr\'eat dans 
celle-ci, n\'e9anmoins, nous donnerons plus loin une technique permettant de les 
simuler). De ce fait, lorsque le processeur arrivera sur cette instruction, il d\'e9clenchera 
une exception correspondant au trap #0! Il reste alors \'e0 analyser ce qui \'e0 caus\'e9 
l'exception et s'il s'agit bien d'un point d'arr\'eat, on remplace le trap #0 par la vraie 
instruction et  le tour est jou\'e9. Ici, on voit tout de suite les probl\'e8mes qui apparaissent : 
en effet que se passe-t-il si le programme que l'on d\'e9bogue s'amuse \'e0 modifier la 
valeur de l'exception trap #0? Le d\'e9bogueur va alors sauter \'e0 cette adresse et non 
pas \'e0 la sienne, et donc le point d'arr\'eat ne se d\'e9clenchera pas, mais pire, l'instruction 
ne sera pas r\'e9tablie et donc, c'est un plantage presque s\'fbr! Pour palier \'e0 ce 
probl\'e8me, CENTinel offre la possibilit\'e9 de choisir le num\'e9ro de l'exception sur laquelle 
le point d'arr\'eat va se d\'e9clencher. Exemple, on peut choisir l'exception 4 (ill\'e9gal) dans 
ce cas le trap #0 sera remplac\'e9 par un ill\'e9gal et son vecteur sera en $10 et non plus 
en $80 pour le trap #0. Une autre solution consiste \'e0 travailler comme pour le trace et 
donc de d\'e9caler le VBR, cela donne souvent de bons r\'e9sultats.\par
Vous avez sans doute remarqu\'e9 que lorsque CENTinel est r\'e9sident, une pression sur 
shift alt help permet d'arr\'eater le programme en cour. Ici encore, nous utilisons deux 
astuces. La premi\'e8re consiste \'e0 d\'e9vier la routine clavier pour indiquer que la pression 
\'e0 eu lieu et placer un flag \'e0 un, la seconde consiste \'e0 chaque interruption VBL, \'e0 
tester ce flag pour voir s'il est ou non valid\'e9. S'il l'est on arr\'eate tout en changeant 
l'adresse de retour de la VBL. Ici encore, on voit tout de suite les limites de cette 
m\'e9thode : en effet, il faut que la VBL et l'interruption clavier tournent toutes les deux. 
Ceci implique que le processeur doit se trouver dans un niveau d'IPL<4. Inutile donc 
de penser \'e0 interrompre un programme si celui-ci passe en IPL7 (move.w #$2700,sr). 
Il faut encore que l'on ne modifie ni la routine clavier ni la VBL, mais cela nous 
sommes s\'fbr que vous l'avez d\'e9j\'e0 devin\'e9.\par
Arr\'eatons-nous un instant sur le fonctionnement du Ctrl a. Cette commande pose un 
point d'arr\'eat sur l'instruction suivante et lance le programme. Tout le probl\'e8me est 
donc de placer ce point d'arr\'eat. Si on est dans la RAM, il n'y aucun probl\'e8me, en 
revanche, si on se trouve dans la ROM, comme nous l'avons vu plus haut, il est 
impossible de placer le moindre point d'arr\'eat. Pourtant, si vous essayez cette 
commande avec CENTinel en ROM \'e7a marche! En fait nous notons l'adresse de 
l'instruction sur laquelle on doit s'arr\'eater et on lance un TRACE \ul instruction par 
instruction\ul0  jusqu'\'e0 arriver \'e0 l'adresse voulue. Ceci explique la relative lenteur de ce 
genre de commandes en ROM. Notez bien la diff\'e9rence entre un ctrl_A en ROM et en 
RAM. En RAM on \ul lance\ul0  alors qu'en ROM on \ul trace\ul0 . La seule technique logicielle pour 
placer des points d'arr\'eat en ROM est donc de tracer. CENTinel poss\'e8de une option de 
trace avec conditions. Si vous appuyez sur T et que vous sp\'e9cifiez PC, CENTinel 
tracera jusqu'\'e0 arriver \'e0 l'adresse que vous avez choisie. Cela permet de poser un 
point d'arr\'eat en ROM.\page
\pard\s11\qc\sl292\slmult1\cs10\b\fs48 Annexe B : Le format du fichier de 
configuration de CENTinel.\par
\pard\sl292\slmult1\fi454\tx2608\cs5\b0\fs24\par
\pard\s13\sl292\slmult1\li454\tx2834 C\rquote est un fichier ASCII facilement \'e9ditable. Il est compos\'e9 de plusieurs unit\'e9s logiques  
encadr\'e9es par les mots-clef \b SECTION\b0  et \b ENDSEC\b0 . Chaque ligne d\rquote une section  est 
constitu\'e9e d\rquote une commande en MAJUSCULE suivie de ses param\'e8tres.\par
\pard\s7\qj\sl292\slmult1\li1134\fi-567\tx567\bullet  Les param\'e8tres num\'e9riques cod\'e9s en d\'e9cimal sont pr\'e9c\'e9d\'e9s d\rquote un \'ab\\\'bb\par
\tab ex: \\12 \\125 \\1997\par
\bullet  Les param\'e8tres num\'e9riques cod\'e9s en hexad\'e9cimal sont pr\'e9c\'e9d\'e9s d\rquote un \'ab$\'bb\par
 \tab ex: $FADA, $12345, $e00030\par
\bullet  Les cha\'eenes de caract\'e8res sont entour\'e9es de doubles cotes.\par
 \tab ex: \'abTOTO\'bb \'aba0+d0\'bb\par
\pard\s13\sl292\slmult1\li454\tx2834  \par
\par
\pard\s8\sl292\slmult1\li1020\cs9\ul\fs28 SECTION SCREEN :\par
\pard\s13\sl292\slmult1\li454\tx2834\cs5\ul0\fs24\par
\bullet\b  SCREEN \b0 largeur Hauteur\par
Permet de pr\'e9ciser la r\'e9solution de travail du d\'e9bogueur. Notez bien que le 
d\'e9bogueur se contente de passer les r\'e9solutions disponibles sur votre machine. 
CENTinel passe donc la r\'e9solution la plus proche ou imm\'e9diatement inf\'e9rieure 
toujours en 16 couleurs, \'e9videmment. Si vous n\rquote utilisez pas DOLMEN, la r\'e9solution 
sera celle s\'e9lectionn\'e9e dans CENTSCREEN.\par
\bullet\b  MAX_RESOL\b0  largeur hauteur\par
CENTinel ignorera les r\'e9solutions disponibles plus grandes.\par
\par
\pard\s8\sl292\slmult1\li1020\cs9\ul\fs28 SECTION COLOR:\par
\pard\s13\sl292\slmult1\li454\tx2834\cs5\ul0\fs24\bullet  \b 680x0\b0\tab couleur\par
\bullet\b  56x01\b0\tab couleur\b\par
\b0\bullet  \b LABEL\b0\tab couleur\b\par
\b0\bullet\b  ADDRESSE\b0\tab couleur\b\par
\b0\bullet\b  SYSTEME\b0\tab couleur\b\par
\bullet  BREAKPOINT\tab\b0 couleur\b\par
\b0\bullet\b  REGISTRE\b0\tab couleur\b\par
\b0\bullet\b  CHANGE\b0\tab couleur\b\par
\b0\bullet\b  MENU\b0\tab couleur\b\par
\b0\bullet  \b PC\b0\tab couleur\b\par
\b0\bullet  \b LECTURE\b0\tab couleur\par
\par
Ces commandes permettent de r\'e9gler les couleurs des diff\'e9rents \'e9l\'e9ments de 
CENTinel.\par
680x0 repr\'e9sente la couleur des fen\'eatres 68040\par
56x01 repr\'e9sente la couleur des fen\'eatres 56x01\par
LABEL repr\'e9sente la couleur des \'e9tiquettes dans le d\'e9sassemblage\par
ADDRESSE repr\'e9sente la couleur des adresses \'e0 gauche des fen\'eatres\par
SYSTEME repr\'e9sente la couleur du nom des fonctions syst\'e8me \'e0 droite les trap\par
BREAKPOINT repr\'e9sente la couleur des points d'arr\'eat et de leurs param\'e8tres\par
REGISTRE repr\'e9sente la couleur des registres\par
CHANGE repr\'e9sente la couleur des registres ayant \'e9t\'e9 modifi\'e9s\par
MENU repr\'e9sente la couleur du menu d\'e9roulant\par
PC repr\'e9sente la couleur de la ligne o\'f9 pointe le PC\par
LECTURE repr\'e9sente la couleur des donn\'e9es provoquant une erreur de lecture\par
\par
"couleur" est la couleur choisie pour chaque \'e9lement. Elle est \'e9crite en num\'e9rique ou 
nomm\'e9e explicitement. Les couleurs disponibles sont:\par
\par
\par
\trowd\trgaph170\trleft2672\trpaddl170\trpaddr170\trpaddfl3\trpaddfr3\trpaddft3\trpaddfb3
\clbrdrt\brdrth\brdrw28\brdrcf0\clbrdrl\brdrth\brdrw28\brdrcf0\clbrdrb\brdrth\brdrw28\brdrcf0\clbrdrr\brdrs\brdrw14\brdrcf0\cellx5239
\clbrdrt\brdrth\brdrw28\brdrcf0\clbrdrl\brdrs\brdrw14\brdrcf0\clbrdrb\brdrth\brdrw28\brdrcf0\clbrdrr\brdrth\brdrw28\brdrcf0\cellx7332
\intbl\pard\intbl\qc\sl292\slmult1\b valeur\cell couleur\cell\row
\trowd\trgaph170\trleft2672\trpaddl170\trpaddr170\trpaddfl3\trpaddfr3\trpaddft3\trpaddfb3
\clbrdrl\brdrth\brdrw28\brdrcf0\clbrdrb\brdrs\brdrw14\brdrcf0\clbrdrr\brdrs\brdrw14\brdrcf0\cellx5239
\clbrdrl\brdrs\brdrw14\brdrcf0\clbrdrb\brdrs\brdrw14\brdrcf0\clbrdrr\brdrth\brdrw28\brdrcf0\cellx7332
\intbl\b0 fond\cell 0\cell\row
noir\cell 1\cell\row
vert\cell 2\cell\row
jaune\cell 3\cell\row
bleu\cell 4\cell\row
magenta\cell 5\cell\row
cyan\cell 6\cell\row
gris\cell 7\cell\row
grisF\cell 8\cell\row
rouge\cell 9\cell\row
vertF\cell 10\cell\row
jauneF\cell 11\cell\row
bleuF\cell 12\cell\row
magentaF\cell 13\cell\row
cyanF\cell 14\cell\row
\trowd\trgaph170\trleft2672\trpaddl170\trpaddr170\trpaddfl3\trpaddfr3\trpaddft3\trpaddfb3
\clbrdrl\brdrth\brdrw28\brdrcf0\clbrdrb\brdrth\brdrw28\brdrcf0\clbrdrr\brdrs\brdrw14\brdrcf0\cellx5239
\clbrdrl\brdrs\brdrw14\brdrcf0\clbrdrb\brdrth\brdrw28\brdrcf0\clbrdrr\brdrth\brdrw28\brdrcf0\cellx7332
\intbl blanc\cell 15\cell\row
\pard\s13\sl292\slmult1\li454\tx2834\par
\b\par
\par
\par
\par
\pard\s8\sl292\slmult1\li1020\cs9\b0\ul\fs28 SECTION WINDOW :\par
\pard\s13\sl292\slmult1\li454\tx2834\cs5\ul0\fs24 On a une section de ce type pour chaque fen\'eatre ouverte.\par
\par
\bullet\b  NB \b0\\num\'e9ro\par
Cette commande est imp\'e9rative pour chaque fen\'eatre et doit \'eatre la premi\'e8re 
commande. Elle fixe le num\'e9ro de la fen\'eatre et donc son emplacement en m\'e9moire.\par
\bullet\b  ACTIVE\b0\par
Cette commande sans param\'e8tre indique que cette fen\'eatre est la fen\'eatre active. Il ne 
peut y en avoir qu\rquote une.\par
\par
\bullet\b  TYPE\b0\par
Fixe le type de fen\'eatre. Les types de 1 \'e0 9 sont r\'e9serv\'e9s au 680x0. Les types de 11 \'e0 
19 sont r\'e9serv\'e9s au 56001. Les valeurs possibles sont les suivantes:\par
\tab 1:\tab registres 680x0\par
\tab 2:\tab d\'e9sassemblage 680x0\par
\tab 3:\tab Hexa dump 16 bits  680x0\par
\tab 4:\tab Hexa-ascii dump 16 bits 680x0\par
\tab 5:\tab ASCII pur 680x0\par
\tab 8 : \tab Affichage des sources s'ils ont \'e9t\'e9 charg\'e9s\par
\tab 11:\tab registres DSP\par
\tab 12:\tab d\'e9sassemblage DSP\par
\tab 13:\tab Hexa dump 24 bits\par
\tab 14:\tab Hexa-ascii dump 24 bits\par
\tab 15:\tab Fractionnel 24 bits\par
\tab 16:\tab Hexa dump 48 bits\par
\tab 17:\tab Stack Dump DSP\par
\tab 18 :\tab Affichage des sources s'ils ont \'e9t\'e9 charg\'e9s\par
\par
\bullet\b  SIZE \b0\\X1 \\Y1 \\Largeur \\Hauteur\par
Permet de pr\'e9ciser la position du coin sup\'e9rieur gauche ainsi que la taille de la 
fen\'eatre.\par
\bullet\b  SCROLL \b0\\X \\Y\par
Fixe la valeur des d\'e9calages horizontaux et verticaux au sein de la fen\'eatre\par
\bullet\b  MEM \b0\\type\par
Donne le type de m\'e9moire DSP de la fen\'eatre. Cette commande est ignor\'e9e pour les 
fen\'eatre 68040.\par
\bullet\b  ADDRESSE \b0 $ADR\par
Est l\rquote adresse de base de la fen\'eatre.\par
\bullet\b  LOCK \b0\'abEXPRESSION\'bb\par
Donne l\rquote expression sur laquelle est verrouill\'e9e la fen\'eatre.\par
\par
\pard\s8\sl292\slmult1\li1020\cs9\ul\fs28 SECTION 68040 :\par
\pard\s13\sl292\slmult1\li454\tx2834\cs5\ul0\fs24\par
Cette section contient diverses options propres au 68040 et \'e0 son interface hardware.\par
\b NE MODIFIEZ CES PARAMETRES QU\rquote AVEC GRAND SOIN, TOUTE VALEUR 
INCONSIDEREE A LE POUVOIR DE BOULEVERSER LE SYSTEME 
D\rquote EXPLOITATION.\par
\b0\par
\bullet\b  DETOURNER \b0\\no_exception\par
CENTinel d\'e9tournera cette exception. Attention \'e0 ne pas utiliser une exception utilis\'e9e 
par le syst\'e8me d\rquote exploitation.\par
\bullet\b  VECTEUR \b0  \\opcode\par
Permet de choisir l\rquote opcode utilis\'e9 par les points d'arr\'eat de CENTinel. ATTENTION une 
valeur incoh\'e9rente produit des effets impr\'e9visibles.\par
\par
 \par
\pard\s2\qc\sl292\slmult1\li454\ri567\tx1022}