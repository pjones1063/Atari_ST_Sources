' A SIMPLE EXAMPLE OF USING SAMPLES FROM POWER BASIC
'    BY A.RACINE      (C) 2-BIT SYSTEMS LTD  1989
'
DIM CODE%(2000)							' SPACE FOR CODE
DIM SAMPLE%(13000)						' SPACE FOR SAMPLE

PRINT "Load Machine Code ...."
BLOAD "BASCODE.EXE",VARPTR(CODE%(0))	' LOAD CODE

PLAY = VARPTR(CODE%(0))+28				' PLAY SAMPLE
BACK     = PLAY + 4						' PLAY SAMPLE BACKWARDS
WAIT     = PLAY + 8						' WAIT FOR END OF SAMPLE
HALT     = PLAY + 12					' STOP
HEAR     = PLAY + 16					' LISTEN TO INPUT
RECORD   = PLAY + 20					' RECORD SAMPLE

SPEED    = PLAY + 24					' PLAY BACK SPEED
LOOPING	 = PLAY + 26					' 0=LOOP OFF ELSE LOOP ON
SAMSTART = PLAY + 28					' START ADDRESS OF SAMPLE
LENGTH   = PLAY + 32					' LENGTH OF SAMPLE (BYTES)

PRINT "Load sample ...."
BLOAD "SAMPLE.SAM",VARPTR(SAMPLE%(0))	' LOAD SAMPLE
START = VARPTR(SAMPLE%(0)) + 12			' ADD SAMPLE HEADER OFFSET

POKEW LOOPING,0           				' LOOPING OFF
POKEL SAMSTART,START    				' SAMPLE START
POKEL LENGTH,25000      				' LENGTH OF SAMPLE

PRINT "Play sample at different speeds ...."
FOR X = 0 TO 4
	POKEW SPEED,X
	CALL LOC PLAY
	CALL LOC WAIT
NEXT X

PRINT "Play sample backwards 5 times."
POKEW LOOPING,1
CALL LOC BACK
for X= 1 to 5
	PRINT X;" ";
	CALL LOC WAIT
NEXT X

CALL LOC HALT
PRINT
PRINT "FINISHED."
