Thanks for downloading the S900 Companion.  This program is designed to
keep you away from the S900's front panel as much as possible!  I feel that
in terms of features, it rivals any comercial editor--not that there even
IS one for the Atari ST and S900.

THE OBLIGATORY DISCLAIMER:

OVERVIEW

First of all, this documentation assumes that you're familiar with the
S900, and that you are using its disk-based version 2 operating system.
The S900 Companion will work with the version 1.2 system, except that
editing the v2.0 program parameters on the keygroup edit page will have no
audible effect (if you save the program and later use it with the v2.0 OS
installed, though, the edits _will_ be recognized).  The S900 Companion has
NOT been tested with the version 1.0 system.  The sampler's OS version is
shown on the sampler's LCD display when it's turned on.

The S900 Companion has three pages.  The first (Main) is where program-
level operations are performed.  Here is where you request, transmit, load,
and save programs.  Also, block keygroup operations are done here, i.e.,
whole keygroups can be copied or deleted with a few mouse clicks.  The
second page (Keygroup Edit) is where every parameter of an S900 keygroup
is edited, oddly enough.  It's important to remember that all operations
in the S900 Companion take place on data that is IN THE COMPUTER, NOT in
the S900 itself.  What this means is that in order to edit an existing S900
program, you must first request or load it into the S900 Companion, then
send it back to the sampler (and save it to an S900 disk) when you're done.
This differs from most editing software, in which midi system-exclusive
commands are used to edit program parameters in the synth _directly_
(however, the usual situation is that you are working with the synth's edit
buffer, and must eventually store the edited patch into its memory--so,
there really isn't that much of a difference, functionally).

The Keygroup Edit Page has one sub-page that deals with editing the
contents of the "Parameter Edit Buffer", a feature of the S900 Companion
that allows cutting and pasting of selected parameter values.

The third page is the Output Map page, where a main page program's output
assignment can be graphically displayed and edited using easy point, click
& drag operations with the mouse.

Since all program editing takes place in the computer you may be
wondering how you'll be able to hear what you're doing.  The S900 Companion
uses the sampler as a "virtual work buffer"; a special, one-keygroup
program is created in the S900 Companion and transmitted to the sampler
each time an edit is done (S900 programs are edited one keygroup at a
time).  You use the right mouse button to "play" this program, allowing you
to hear the results of your editing.  Just remember that you are editing
only one keygroup, NOT the actual S900 program.  When you're satisfied with
what you're hearing, the keygroup is copied into the S900 Companion program
(in the computer) and then MUST be transmitted to the sampler if you want
to save your work. (Actually, you can save an S900 Companion program to
Atari disk in midiex format; of course, if you later load it back in and
transmit it to the S900 you must have the appropriate samples present in
the sampler in order to hear anything, so this method is not recomended).

**A note of caution:  There are a few instances where certain operations
  will overwrite data already present, WITHOUT an alert box warning you, or
  any way to "undo" the operation.  This was a conscious decision on my
  part to avoid a lot of "Are you sure?" dialogs that can slow down the
  "power user".  In most cases these operations involve several steps,
  or a very specific combination of keypresses (like holding the <Control>
  and <Alt> key simultaneously), so it's assumed that you know what
  you're doing when you invoke them! Throughout this documentation you'll
  see warnings similar to this one (indented paragraphs preceded by two
  asterisks) whenever such an operation is detailed.

THE MAIN PAGE

When you run the S900 Companion, the first screen you'll see is the main
page.  The two large boxes, labeled "Current" and "Composite" program,
refer to the two S900 programs that "live" in the S900 Companion.  When you
load, save, request or transmit a program you are always doing it with the
CURRENT program.  The Composite program is created in the S900 Companion by
copying selected keygroups from the Current program or from a keygroup
edit buffer (this will be explained later).  In order to save the Composite
program or transmit it to the S900, you must click on the "Swap" button;
the Composite program becomes the Current, and vice-versa.

The first step in editing an existing S900 program is to request it from
the sampler or load it from a disk file.  If you're creating a program
from scratch you don't need to have any programs in the S900, but in all
cases you MUST have the samples you need present!

There must always be two-way communications from the ST to the sampler,
and the basic midi channel in the S900 must match the channel number
check-marked under the "Midi Channel" menu (unless the S900 is in 'omni'
mode, in which case the channel set in the S900 Companion doesn't matter).

Requesting a program:

Select "Get Program" from the file menu.  The Current program box should
display a list of all the programs in the sampler.  Click on the desired
program to request it; to abort, click anywhere other than on one of the
displayed program names.

**If there is a Current program already present, it will be overwritten
  by the requested program, with no warning alert or undoing possible.

When a program has been requested into the S900 Companion, its keygroups
will be listed in the Current program box (the loud and/or soft sample
names are displayed, depending on each keygroup's Velocity Switch
parameter).  If there are more than 17 keygroups in the program, a
downward-pointing arrow will appear at the bottom of the box.  Click there
to see the remaining keygroups; the arrow will change to point upwards.
Click there again to return to the first display, and so on.

Sending the Current program to the sampler:

When you are finished editing a program, it should be sent back to the
sampler.  There are two ways to send the Current program to the S900:

1. Press the space bar.  The Current program is sent immediately.  If a
   program with the same name exists in the sampler, it will be *replaced*
   by the Current program; otherwize, the Current program will be *added*
   to those already in the S900, *space permitting*.

2. Select "Send Program" from the "File" menu.  Similarly to the "Get
   Program" option, the Current program box changes to display a list of
   programs in the sampler.

  --Click on a program name to *overwrite* that program with the Current
    program, space permitting.

  --Click anywhere else in the Current program box to *add* the Current
    program to those in the sampler, space permitting. (Caution: If the
    Current program's name matches that of any program already in the
    S900, the Current program will _replace_ that program).

  --Click anywhere outside the Current program box to abort.

The first method is meant to save time in straightforward editing
situations, where you've requested a program ,edited it in some way, and
just need to shoot it right back to the sampler.  The edited program will
automatically replace the program that was originally requested (unless
you've changed its name).  The second method gives you more flexibility
by allowing you to send the Current program to any existing S900 program
location, or add it to those already there.

After a program has been sent to the sampler, the S900 Companion updates
the program list displayed in the Current program box.  This is meant to
give visual feedback that the transfer was successful.  Of course this
feature is most effective when the Current program has a different name
from that of any program already in the S900--If the new name is displayed
then it's obvious the transfer worked.  If the Current program name is
the same as one already in the sampler, this feature is a little more
problematic--i.e., the program name will be displayed whether or not the
Current program actually replaced the S900 program of the same name or
not.  If the number of keygroups in the Current program is the same or
less than the number of keygroups in the S900 program it's replacing, you
can be fairly certain that the transfer worked.

The most probable reason for an unsuccessful transfer, other than a
problem with midi communications, would be if you exceeded the S900's
program/keygroup limit--That's what's meant by "*space permitting*".  I
have found that the total number of keygroups, programs, and samples added
together cannot exceed 66.

After approximately one second, the updated program list is cleared and
the Current program box will change back to displaying the keygroup list.

Changing/Copying a program's name:

Clicking the mouse in the name field of either the Current or Composite
program lets you change its name or copy the name from the other program.
The latter function is available only if both programs are present in the
S900 Companion.  The alert boxes should be self-explanatory.  As you may
know, two programs with the same name can't exist in the S900; use the
rename function if you've requested a program from the sampler, edited it
in some way, and want to send it back while keeping the original program in
the S900.  Also, this option lets you use lower-case characters and other
ASCII characters in your program name, something the S900 doesn't.

MAIN PAGE KEYGROUP OPERATIONS

Selecting Keygroups:

As mentioned earlier, the main page is where block keygroup operations
are performed.  These operations are represented by the three buttons in
the middle of the screen, and work only on _selected_ keygroups (with one
exception, which will be detailed shortly).

To select a keygroup, click on it; its text will invert.  To de-select,
click on it again.  The two buttons under each program box affect the
selection process:  The first, "S. ALL" (select all), is a quick way to do
exactly that.  The second button is marked "DE-SEL" (de-select), and is
initially greyed-out and unavailable.  Once a keygroup or keygroups have
been selected, the button text becomes normal.  Clicking on "DE-SEL" now
_temporarily_ de-selects any selected keygroups in that program. (The
button inverts and the text changes to "RE-SEL"; clicking there again
restores the previous selections, and changes the button text back to
"DE-SEL"). <SHIFT>-clicking on "DE-SEL" will _permanently_ de-select any
selected keygroups.

If you select another keygroup while keygroups are temporarily de-selected,
an alert box will warn you that your previous selections will be
cancelled if you proceed.

Keygroup Operations:

COPY      All selected keygroups in the Current program are copied to
           the Composite program.  Selected keygroups in the Composite
           program are not affected.  This is one way a new program is
           created, and is roughly analogous in concept to the "Put" and
           "Get" feature of the S900's v2.0 operating system, only a
           little quicker!  If there is no Composite program, one will be
           created, named "*Untitled*".

  The exception mentioned earlier: <SHIFT>-clicking on this button copies
  the _entire_ Current program to the Composite program, regardless of
  any selected keygroups in either program.  If a Composite program
  already exists, it will be overwritten by this operation (an alert box
  will give you a chance to abort, otherwise the copy happens immediately).

DELETE     **All selected keygroups in both the Current and Composite
             programs are deleted.  There is no undo for this!

  If any of the Current program's keygroups have been copied into a
  Keygroup Edit Buffer for editing (a process that will be detailed
  shortly), you may see an alert box telling you that one or more
  of the selected keygroup(s) are "linked".  Normally, a Keygroup Edit
  Buffer's data must be copied back to the keygroup it came from in the
  Current or Composite program when you are done editing it; This alert is
  simply a reminder, and gives you a chance to abort the deletion in case
  you aren't done editing the keygroup(s) in question.  The alert box
  offers three choices:

  --"All":  All selected keygroups are deleted, whether or not they are
    linked to a Keygroup Edit Buffer.

  --"Leave":  All selected keygroups NOT linked to a Keygroup Edit Buffer
    are deleted; those that are linked will remain (and remain selected)
    after the deletion.

  --"Cancel":  The entire operation is cancelled.

  If none of the selected keygroups are linked, the deletions happen
  immediately; the alert box come up _only_ if one or more of the selected
  keygroups is linked.  Linking and Keygroup Edit Buffers are explained in
  more detail further in this documentation.

COPY      All selected keygroups are replicated within their respective
           programs.

The "29-keygroup" bug and other anomalies:

As mentioned previously, I've discovered through experimentation that the
total number of samples, keygroups and programs in the S900 added together
can't exceed 66.  It's quite possible to create a single program with 64
keygroups if they all play the same sample (and that sample is the only one
in the S900).  Requesting such a program will most likely overrun the ST's
midi buffer and lock up the computer.  Since the display box can show 17
keygroups at a time, and there are two "pages" to it, I strongly advise you
to not request a program with more than 34 keygroups!  In any event you
won't be able to send it back intact to the sampler, because the S900 has a
bug that corrupts any program sent to it with more than 29 keygroups; any
number over that will contain only garbage.  Because of this, the S900
Companion will limit the copy & replicate functions described above so that
neither the Current or Composite program will contain more than 29
keygroups (this limit also applies to keygroups added to either program
from the Keygroup Edit page, a function described later in this
documentation).  If any operation would result in this 29-keygroup limit
being exceeded, an alert box will inform you.  You'll have the option of
copying the first 'n' number of selected keygroups up to the maximum of 29,
or aborting the process completely.

Note that you can request a program with up to 34 keygroups, and it'll
transfer successfully into the S900 Companion; just understand that you
won't be able to send the whole program _back_ to the sampler.

Loading and saving files:

The S900 Companion allows you to load and save S900 programs to an Atari
disk in midiex (pure system-exclusive) format (i.e., any program that
handles midiex files can send these files to an S900).  This can be a
convenience in certain circumstances (such as temporarily storing a program
while you request or load another one into the S900 Companion) but you
should always remember that the best place for an S900 program file is on
the Akai's own disk, along with the samples it uses!

These functions are accessed with the "Load" and "Save" menu items in the
"File" menu, and affect the _Current program only_.

**Just as in requesting a program, loading one will trash any existing
  Current program with no warning alert or undoing possible.  If one or
  more of the existing Current program's keygroups are linked to Keygroup
  Edit Buffers, a small message box will pop up for about one second with
  a message to that effect, as a reminder (this message box may also
  appear when requesting a program from the sampler).

The "Swap" button:

Since transfers and file operations operate only on the Current program,
you must use this function if you want to send the Composite program to the
S900, or save it to disk.  It does exactly what it says!  Note that the
selection status of any keygroups (whether they are selected or
temporarily de-selected) are swapped as well.

Deleting a program:

To dump an entire program, you could click on the "S. ALL" button under
the appropriate program box, then click on "DELETE" as previously
described.  Another way is provided by <SHIFT>-clicking on "DELETE" and
answering the alert box.  If any links exist (as previously described
under "Keygroup Operations"), the alert box will contain a message to that
effect.  Unlike the alert presented when deleting individual keygroups,
this one does not give you the option of leaving linked keygroups; the only
options are to delete the entire program or abort the operation entirely.

THE KEYGROUP EDIT PAGE

In the S900 Companion, programs are edited one keygroup at a time.  It's
important to understand how the S900 Companion deals with keygroup
editing:

There are ten "keygroup edit buffers", herein referred to as "KEB's".
These are separate areas in the S900 Companion.  To edit a keygroup in the
Current or Composite program, it's copied to one of these buffers.  When
you're done editing, it's copied back to the Current or Composite program
(don't forget that the program should then be sent to the S900!).

The KEB's can also be used to create a program from scratch.  It's not
even necessary that there be a Current or Composite program present in the
S900 Companion!  The procedure would be to go to an empty KEB, initialize
it, and edit it to your satisfaction.  When you're done, the KEB is copied
to the Current or Composite program as before; if there is no such program
present, the S900 Companion knows that you are creating a new one!

If this sounds a bit convoluted, don't worry; the S900 Companion has two
functions, "owning" and "linking", that keep track of each KEB's origin and
where they should be copied back to.  The copying process itself is handled
automatically when you click on the appropriate exit button of the Keygroup
Edit page.

Whenever you enter a KEB (or switch from one KEB to another), the buffer
data is sent to the S900 as a _separate program_, titled "*Work Buf*".  As
mentioned earlier, this program is checksummed and re-sent to the sampler
with each edit.  You use the right mouse button to "play" this program,
allowing you to monitor the results of your editing.  One caveat is that
there must be enough room in the S900's program/keygroup memory to
accomodate this temporary, one-keygroup program.  If things don't sound
quite right as you are editing, make sure that the "*Work Buf*" program is
present in the sampler, and is currently selected; if not, you'll have to
make room by deleting one or two programs, keygroups, or samples from the
S900's memory.

In this documentation, references to the "Keygroup Edit page" mean the
page where any one of the ten KEB's are displayed.

Entering the Keygroup Edit Page:

To edit any keygroup listed on the main page, <SHIFT>-click on it; the
keygroup will be copied to the first available empty KEB and you'll move to
the Keygroup Edit page immediately, with the KEB you just copied the
keygroup into displayed. <ALT>-clicking on a keygroup will copy it to a
KEB, _without_ moving you to the buffer; this is so you can copy more than
one keygroup before moving to the Keygroup Edit page.

**Important:  Once all ten KEBs' have been filled, any subsequent copying
  of keygroups will be made to KEB #10.  Any data already in that buffer
  will be overwritten, with no warning and no undoing possible.

You can also reach the Keygroup Edit page by selecting "Keygroup" under
the "Edit" menu.  In this case, you'll go to the last KEB you were in, or
the last KEB that you copied a main page keygroup into.  If entering for
the first time, you'll be in KEB #1.

Many of the options described next apply only to ACTIVE KEB's.  It's not
too hard to tell if a KEB is active or empty--An empty buffer will display
no parameter values or envelope shapes.

KEB Management:

At the bottom left of the screen are ten small boxes, representing the ten
buffers.  The highlighted box is the current KEB (the one you're looking
at).  A small inverted triangle directly above a box means that KEB is
active and contains data.

--Click on another box to move to that KEB.

**<Shift>-clicking on another box copies the current KEB data to that KEB,
  if the current KEB is active.  If the target KEB is active, its data
  will be overwritten--There is no warning alert box or undoing possible.

**<Control+Alt>-clicking on any box _other than the current KEB_ will clear
  that KEB if it's active.  Again, there is no warning alert or undoing
  possible, so this option should be used with care!

There is only one keyboard equivalent to a mouse-controlled function in
the S900 Companion, and it's here: Pressing one of the ten function keys is
equivalent to clicking in one of the ten small boxes.  This works in all
three situations described above.

The button labeled "INIT", in the bottom center of the screen, has
multiple functions.  A simple click does what the label says--it
initializes the current KEB (this would be the first step in creating a
program from scratch).  The values default to those of the familiar
"TONE PRGRM" (if the KEB is active, an alert box will ask you for
confirmation before initializing the buffer; also, in the case of an active
KEB, all values _except_ the sample assignments will be initialized).
If the current KEB is active, <SHIFT>-clicking on "INIT" brings up an
alert box allowing you to clear the current KEB (<shift>-clicking in an
empty KEB initializes it just as a simple click would). <Control+alt>-
clicking on "INIT" brings up an alert box allowing you to clear _all ten_
KEB's.  These last two operations can't be undone!

"Owning" a KEB:

At the upper left of the screen is a small box, divided into two halves
labeled "CURR" and "COMP".  When one of these halves is highlighted, it
means that the corresponding main page program "owns" this KEB.  When you
are done editing (you click on the <Done> or <Add> button at the bottom
center of the screen), the data from this KEB is copied to the main page
program program set as the owner.  The KEB's owner has implications for a
few other operations which will be described later.

Of course, an empty KEB will have no owner; if you initialize an empty
KEB by clicking on "INIT", it is still not considered owned.  If you copy
a keygroup from the Current or Composite program by shift-clicking on it
from the main page, then the owner will be set automatically.  If you copy
the current KEB to another KEB, the copy will have the same owner.

An active KEB's owner can be changed at any time by clicking in the
appropriate half.  You could, for instance, copy a keygroup from the
Current program, edit it, change its owner, and place it in the Composite
program if you like.

If a KEB is empty, clicking on "Curr" or "Comp" will initialize it and set
its owner at the same time.

"Linked" KEB's:

The most common form of editing in the S900 Companion is when you copy a
keygroup from the Current or Composite program into a KEB, edit it, then
copy it back to the main page program, replacing the keygroup it was
originally copied from.  This is what's meant by a "linked" KEB.  Linking
is an automatic and transparent process that you need not concern yourself
with in most editing situations; when you click on the <Done> button, the
KEB data replaces the specific keygroup in the Current or Composite program
it was originally copied from--"linked" with.  It makes sense, then, that
if a KEB is _not_ linked, it wasn't originally copied from a keygroup in
its owner program, so there is no keygroup in the owner program for it to
replace when you're done editing.  In this case, the KEB data can only be
_added_ to the owner program; it becomes a new keygroup in the Current or
Composite program (yes, that's what the <Add> button does!). This is the
main difference between a linked and unlinked KEB:  An unlinked KEB may
only be _added_ to the owner program; a linked KEB can both be added to a
program _or_ it can replace the keygroup in the owner program it was
originally copied from.

Although linking is an automatic process, you should keep the following
in mind:  If a KEB is linked and you change its owner, the link is
cancelled.  If you change owners back to the original program, _without
having added the KEB data to the new owner program_, the link is restored.
(Once an unlinked KEB is added to the Current or Composite program, it's
considered linked to the new keygroup in that program).  Now for the
obvious stuff:  If you delete a keygroup from the Current or Composite
program on the main page (or delete the entire program), then any KEB
linked to that keygroup (or any keygroup in the deleted program) will be
"unlinked".  If you load or request a new Current program, any KEB's with
links to the previous Current program's keygroups will be unlinked. (As
previously described under "Keygroup Operations", any such main page
function will alert you if the operation involves any linked KEBs, giving
you a chance to abort).

Two incidental points:  If you swap the Current and Composite program on
the main page, the S900 Companion will keep things in order:  All the
KEBs' owners will also swap, and any links will be maintained.  Also, if
you copy the current KEB to another KEB, and the current KEB is linked,
the copy will be also be linked to the same keygroup in the owner
program.

The "Get Keygp" option:

You can copy a keygroup from the Current or Composite program into the
current KEB with this option button, located at the upper left of the
screen.  If the KEB is empty, an alert box will first ask you which
of the two programs you wish to get a keygroup from; then, a box will
appear, listing the keygroups in that program. (If the KEB is active and
already has an owner, you won't see this alert box--The keygroup list
will be from the owner program.  Make sure the correct owner is highlighted
before clicking on "Get Keygp").  Similar to the main page, if there are
more than 17 keygroups in the program, arrows at the bottom of the box will
allow access to keygroups 18-34.  Click on a keygroup to copy it into the
current KEB, or anywhere else to abort.  Once copied, the current KEB is
considered linked just as if you had copied it from the main page.

**If the current KEB is active, its data will be overwritten by the
  chosen keygroup, with no warning alert or undoing possible.

Parameter Editing:

All editing is done with the mouse.  On/Off parameters are toggled by
clicking on them.  The output is selected by clicking in one of the ten
circles labeled 1-8, L (Left), R (Right), and M (Mix).  To change a sample
assignment, click directly on the sample name.  The S900 Companion sends a
"catalog request" message to the sampler and opens up a box with a list of
the available samples.  Click on any displayed name to set a new sample, or
anywhere else to leave things as they are.  Keep in mind that you may not
hear the loud or soft sample depending on the settings for Velocity Switch
Threshold and Velocity Crossfade.

The remaining parameters are edited as follows:

To _decrement_ a parameter, click anywhere from slightly to the left of
the number (or on the hundreth's digit if present) to the tenth's digit.
For key ranges, click anywhere from the key name to the space on its
right (which may or may not contain a sharp sign).

To _increment_, click anywhere from on the one's digit to slightly to the
right of the number.  For key ranges, click anywhere from the octave
number to slightly to the right of this.

A single click will increment or decrement by one unit.  However, if you
_continue to hold the left mouse button down_:

 1.  Keeping the mouse stationary, the value will begin scrolling slowly.
 2.  Moving the mouse further from the parameter will cause the scroll
     speed to increase.
 3.  Moving the mouse to the opposite side of the parameter will cause the
     scroll direction to reverse.
 4.  Clicking the right mouse button will cause the parameter value to be
     set to it's maximum or minimum, depending on whether you are
     incrementing or decrementing.

Also, when editing a signed parameter, clicking directly on the sign will
cause its value to be set to 0.  To decrement a signed parameter, start
by clicking on the ten's digit.

Envelope editing:

Envelope values can be edited by clicking on the numbers under each
envelope display box ("E.D. box" from now on) as described above, or by
dragging the small boxes in the E.D. boxes to change the envelope shape.
Note that you don't have to click directly on a small box--Anywhere in its
vertical plane will "grab" it, as long as the mouse is inside the E.D.
box.  The second small box controls the attack time, the third changes the
decay and sustain, and the fourth controls the release time.

Because the third small box changes both the decay and sustain times,
it's quite possible to inadvertently change one parameter when you meant to
edit the other.  While the mouse is in an E.D. box, press <d> to edit
only the DECAY--The sustain parameter will be "locked".  Press <s> to
edit the SUSTAIN only--The decay parameter will lock.  The corresponding
text under the E.D. box ("Decay" or "Sustain") will gray out when one of
these parameters are locked.  To "unlock" the parameter, press any key
*except* "a", "b", "c", or "o" (these keys set different editing modes and
are explained further on).  The mouse must be within the E.D. box for
unlocking as well.  This feature applies only to click & drag-editing of
the envelope shape; clicking on any of the numbers underneath the E.D.
boxes to change their values will still work, locked or not.

Note that, because the color monitor's vertical resolution is half that of
the mono monitor, click & drag editing of the envelope sustain changes
the value in units of two when using the S900 Companion with a color
monitor. Of course you can set "in-between" values by clicking on the
numbers under the E.D. boxes.

Undoing and Shift-Editing:

Pressing the <Undo> key on the ST's keyboard will undo the last edit.
Repeated presses alternates between the two values, letting you compare
values.

Normally, every time you do an edit, the updated "*Work Buf*" program is
immediately transmitted to the to the S900.  However, if you keep a shift
key pressed as you edit, this program won't be sent to the sampler until
you release it.  Then, the <Undo> key will undo the _entire group_ of edits
that were made while the shift key was pressed.  As before, repeatedly
pressing <Undo> lets you compare the previous and newly-edited values.

Although you can edit as many parameters as you like with the shift key
held, the Undo function will only remember the last _30_ edits.

The Backup Buffer:

The S900 Companion maintains an invisible backup KEB.  This buffer is
reset whenever you move to the Keygroup Edit page, or move from one KEB
to another.  When you first move into a KEB or initialize an empty KEB,
its contents are automatically copied into this backup buffer.  At any
point, if you click on the button labeled "BAK" ("BACKUP" on a mono
monitor) in the bottom middle of the screen, the current KEB will swap with
the backup buffer.

You can copy the current KEB to the backup buffer at any point by
<SHIFT>-clicking on the "BAK" button. (Incidentally, the backup buffer is
not affected by initializing an active KEB.  If you <shift>-click on BAK
_before you initialize_, you'll have a way to undo the initialization if
you need to).

_Individual parameters_ from the backup buffer can also be recalled.
Press the <b> key and the mouse pointer shows a small letter "b" next to
it.  Normal editing is disabled; now, clicking on any parameter replaces
the current value with that from the backup buffer (click once in either
E.D. box to recall all envelope values at once).  Note that values are
_not_ swapped as when you click on "BAK", they are simply copied from the
backup KEB.  However, you can use the <undo> key as in normal editing to
recall and compare with the previous value.  Holding the <shift> key also
works the same as in regular editing, allowing you to delay sending the
new values until you release it, then letting you use the <undo> key to
recall and compare all the values changed since the <shift> key was held
down.

Press the <b> key again to turn this feature off and return to normal
editing.

The <Done>, <Add>, and <Exit> buttons:

As previously mentioned, the <Done> button assumes that this KEB is
linked to a keygroup in the owner program.  In this case, the KEB data is
copied back to the owner program, _replacing_ the keygroup it was copied
from.  This is the usual situation.  If you click on "Done" and the KEB
isn't linked, you'll get an alert box allowing you to add the keygroup to
the owner program, or abort.

The <Add> button copies the current KEB to the program that owns this
buffer.  The keygroup is _added_ to the program (space permitting-
Remember that you can't have more than 29 keygroups in a program).  If the
KEB is not owned, an alert box will ask you to choose the program you wish
to add this keygroup to (Current or Composite), or abort.  Once added, the
KEB is considered linked to the new keygroup in the owner program,
regardless of its previous link status.

The <Exit> button takes you back to the main page without doing anything.

<Shift>-clicking on <Done> or <Add> is equivalent to clicking that button,
then clicking on <Exit>.  The KEB will be copied to the owner program
and you'll return to the main page.

At the risk of repeating myself needlessly, please remember that the
edited program exists in the S900 Companion, NOT the S900 itself.  In
order to save your work you MUST transmit this program to the sampler by
selecting "Send Program" from the "File" menu (or pressing the space bar)
on the main page, as detailed previously.  Of course, the program should
then be saved on the S900's own disk.

If the owner program does not exist, the S900 Companion assumes that you
are creating one.  When you return to the main page, you'll see that you
now have a program, called "*Untitled*", with the keygroup you were just
editing.  As you might expect, this keygroup is linked to the KEB you
were just in.  You may want to rename this program to something a little
more descriptive before sending it to the sampler!

RIGHT MOUSE PLAY

The S900 Companion doesn't currently support a midi thru function, so the
only way to monitor the results of your editing is to use this feature,
which operates only on the Keygroup Edit page (and only if the current KEB
is active).  Pressing the right mouse button sends a note-on; releasing it
sends the note-off.  With simple right-mouse clicks, the pitch of the note
is determined by the mouse's horizontal position on the screen.  The
particular note sent depends on the key range programmed in the current
KEB.  For example, if the low and high notes of the Key Range parameter are
the same, then the same note will be sent no matter where the mouse is on
the screen.  If the key range spans 3 semitones, the note sent is
determined by which 'third' of the screen the mouse pointer is in.
However, if you hold a shift key as you click the right mouse button, the
note sent will always be the midpoint of the key range no matter where the
mouse is on the screen.

The velocity value sent is determined by the mouse's vertical position.
Higher velocity values are sent with the mouse nearer the top of the
screen.  This value can also be overridden by keeping the <alt> key
pressed as you right-click; in this case, a velocity value of 127 will be
sent no matter where the mouse is on the screen.

Note that the settings for Velocity Switch Point and Velocity Crossfade,
along with the mouse's position on the screen, will affect what you hear
as you right-click.

THE PARAMETER EDIT BUFFERS ("PEB's")

Under the small box labeled "Get Keyg" is one labeled "Parm Edits".  This
is one of the most powerful features of the S900 Companion, allowing for
flexible and creative editing of S900 programs.  A Parameter Edit Buffer
("PEB" from now on) is a place were individual parameters' values are
copied into, to be later pasted into other KEB's or the Current or
Composite program keygroups.  The S900 Companion has three such buffers,
indicated by the three selections shown:  "Copy" (Copy Parameter), "Cond"
(Conditional Edit), and "All" (All Keygroup).  Each buffer holds up to 30
parameters' values.

--Values placed into the "Copy Parameter" buffer can be pasted into any
  active KEB at any time.

--Values in the "All Keygroup" buffer are pasted into all keygroups of
  either the Current or Composite program.

--The "Conditional Edit" buffer doesn't do any editing per se; rather,
  it can control the pasting from the other two buffers.

The All Keygroup and Copy Parameter buffers operate similarly. There are
two ways to place values into these buffers:

 1.  AS YOU EDIT.  Press the <a> or <c> keys on the ST's keyboard.  The
     mouse pointer will show a small letter "a" or "c" next to it,
     indicating that each time you do an edit, the resulting value will
     be placed in the All Keygroup or Copy Parameter buffer.  Press the
     same key again to turn this function off. _Editing itself is not
     affected in any way_.

 2.  <Control>-click ('C'ontrol= Copy Parameters) or <Alt>-click
     ('A'lt= All Keygroups) on a parameter; the current value is
     placed in the respective PEB.  The parameter value will flash to
     confirm this.  No editing takes place. <Control> or <alt>-clicking on
     _any_ output (even "between the circles") places the current output
     selection in the PEB.

The second method has priority over the first; for example, even if the
mouse pointer shows the small "c" indicating edits will be placed in the
"Copy Parameter" PEB, Alt-clicking on a parameter will place it's value
in the "All Keygroup" PEB (and vice-versa).

As mentioned, each buffer can hold up to 30 values.  You'll get an alert
box warning you if this limit has been reached.  Also, only one value for
any one parameter can exist in a PEB; if, for instance, you place the VCA
Attack time in a PEB, then later change it and place it in the same PEB,
the first value will be discarded.

There is a shortcut for placing existing envelope values in the PEB's:
<Control> or <Alt>-clicking anywhere in an E.D. box will place all the
envelope values in the Copy Parameter or All Keygroup PEB (respectively) at
once.  Doing this with the filter envelope copies the "Amount" parameter as
well as the four envelope time values.  The E.D. box will flash to
confirm.

The Conditional Edit Buffer:

This PEB is different from the other two.  Like the others, you can store
up to 30 parameters' values in it.  These values are not pasted anywhere,
however; instead, they are compared with the values for the same parameters
in the current KEB (when pasting from the Copy Parameter buffer) or
Current/Composite program keygroup (when pasting from the All Keygroups
buffer).  Depending on settings you make in the PEB edit box (detailed
shortly), the pastes can be made to happen or not depending on if the
parameter values match.  This is "conditional editing".

There is only one way to place values into the Conditional Edit Buffer:
Press the <o> key on the ST's keyboard.  The small letters "co" will appear
next to the mouse pointer.  Normal editing is disabled.  Now, click on any
parameter to place its value in the Conditional PEB (as before, clicking in
either envelope box places all envelopes values in the buffer at once).
Press the <o> key again to turn this function off and return to normal
editing.

Using the PEB's:

A simple click on "Copy" or "All" pastes the values from the respective
PEB into the current KEB (Copy), or the keygroups of the owner program
(All).  Clicking on "Cond" is different; in this case, you are just
toggling Conditional editing on and off ("Cond" will highlight when
Conditional editing is on).  This is a "master switch".  In addition,
Conditional editing is switched on and off separately for Copy Parameter
or All Keygroup pastes; this is done in the PEB edit box, described next.

The pasting operations are explained in more detail further in this
documentation.

The PEB Edit Box:

<SHIFT>-clicking on "Copy", "Cond", or "All" brings up the Parameter Edit
Buffer Edit box for the respective PEB, where you can view all the
parameter values and change, delete, or copy them to the other two buffers.
In addition, all three PEB edit boxes have switches that control the
operation of the Conditional edit buffer.  Parameter values can also be
saved to disk for future use!

The left side of the box will list the parameters in the buffer by name,
along with their current values.  If there are more than 15, a small
downward-pointing arrow will appear at the bottom of the list.  Click there
to see the remaining ones; the arrow will change to point upwards.  Click
on the arrow again to return to the first display, and so on.

All functions except for "Edit" operate only on _selected_ parameters.
Like selecting keygroups on the main page, you click on a parameter to
select it (its text will highlight), and click on a selected one to de-
select it.  The "Select All" button is a shortcut for doing exactly that,
while the "Deselect" button quickly de-selects any selected parameters.

The major functions of the PEB edit box are controlled by the five
buttons on the bottom:

**DELETE: This option deletes all _selected_ edits (no undo).

--EXIT: Closes the PEB edit box and returns you to the current KEB.

--SAVE: Parameter values can be saved for future use.  This could come in
  handy, if for example, you've come up with some specific settings for
  values that you might want to apply to other keygroups in the future.
  Clicking here opens a file selector for saving the _selected_ edits.
  Files are saved with the extention ".S9E" ("S900 Edit").

**LOAD: This option brings up a file selector allowing you to load files
  saved with the previous option.  Files saved from any of the three
  PEB's can be loaded back into any of them (i.e., edits saved from the
  Copy Parameter buffer can be loaded into the All Keygroup buffer, etc.).
  The edits being loaded will _replace_ any edits in the PEB you are
  loading them into (all existing edits will be lost).

--EDIT: This option allows you to "edit the edits"(!).  If you click
  here, the PEB edit box will close, and it will appear that you are back
  to editing the KEB.  This is not the case; note that the only
  parameters displayed are those from the PEB.  You use the mouse
  similarly to editing a KEB, only now you are editing the values in the
  PEB! (Also note that envelope parameters are displayed numerically, not
  graphically, and must be edited as such).  Right-mouse play and all
  other non-editing functions are disabled on this sub-page.

  Note that the five buttons at the bottom of the KEB screen are changed;
  the two larger buttons, now labeled "PEB" and "KEB" are the two exit
  buttons:

 --PEB (Parameter Edit Buffer)-Click here to return to the PEB edit box.

 --KEB (Keygroup Edit Buffer)-Click here to return to regular keygroup
   editing.

  As mentioned on the screen, a simple click in either of these two boxes
  accepts any changes you have made to the PEB values.  <SHIFT>-clicking
  cancels the changes and keeps the PEB values as they were before you
  started editing them.

Copying parameter values to other PEB's:

This feature lets you move parameter values between the three PEB's and
is controlled by the four buttons on the upper right of the PEB edit box.
To implement this, highlight one of the two buttons on the left, then
choose the PEB you wish to copy to (the "target" PEB) by clicking on one of
the two buttons on the right:

--Copy To (R): "R" means _replace_.  Any edits currently in the target
               PEB will be deleted, and replaced with the selected
               edits from the current PEB.

--Copy To (A): "A" means _add_.  The selected edits are added to any edits
               already in the target PEB (The total number of resulting
               edits in the target PEB must be 30 or less).

When adding edits, if the same parameter exists in the target buffer, its
value will be replaced by the value in the current PEB.  An alert box
will warn you of this and give you a chance to abort.

The Conditional Edit Switches:

Four buttons control the Conditional Edit buffer's operation.  The upper
two enable and disable Conditional editing for the Copy Parameter and All
Keygroups PEB's.  If the corresponding box is highlighted, AND the
"master switch" ("Cond") on the Keygroup Edit page is also highlighted,
then Conditional editing will be in effect for any pastes done from that
buffer.

If Conditional editing is enabled, The lower two buttons determine
whether the pastes will happen or not:

--PASTE: The target keygroup is examined to see if its values match those
  in the Conditional Edit PEB.  The paste will occur _only if the values
  match_.

--PASTE NOT: As you might expect, the opposite action.  If the values
  match, the paste will NOT occur; otherwize, it will.

These are radio buttons; only one condition can be in effect, and it
applies to pastes from both of the other PEBs.

Pasting values from the Copy Parameter buffer:

To paste the Copy Parameter buffer values into the current KEB, click on
"Copy" in the "Parm Edits" box.  If this PEB is empty, a small message
box will pop up briefly to tell you.  Otherwize, a message box saying
"Pasting..." will pop up.  If Conditional editing is in effect for the Copy
Parameter buffer (and the "master switch" is highlighted), the values in
the Conditional PEB are compared with the same parameters in the current
KEB.  If the values match and "Paste" is highlighted in the PEB Edit box,
OR if the values _don't_ match, and "Paste NOT" is highlighted, the paste
will occur.  In this case, "** Done **" will appear in the message box.  If
the values _don't_ match and "Paste" is highlighted, OR if they _do_ match
and "Paste NOT" is set, the pastes will NOT occur, and the word "** NOT **"
will appear in the message box.

If Conditional editing is not enabled, then the paste(s) will occur
regardless of any values in the Conditional PEB and "** Done **" will
appear in the message box.

If the pastes occur, the screen will update to show the new values.  The
<Undo> key will now restore (and, with repeated presses, allow comparisons
with) the values previous to the paste.

Pasting values from the All Keygroups buffer:

To paste the All Keygroup buffer values into every keygroup of the Current
or Composite program, click on "All" in the "Parm Edits" box.  The pastes
will be done to _whichever program owns the current KEB_.  Because
there is NO undoing possible, an alert box will confirm your action before
the pastes happen.

The same "Paste/Paste NOT" conditions relating to Conditional editing for
the Copy Parameter PEB apply, except that the values in the Conditional PEB
are compared with _each keygroup_ of the owner program.  This means that
the parameter values may be pasted into some keygroups and not others.
(For example, if the Conditional PEB has output #8 as a value, and
"PASTE" is highlighted in the PEB Edit Box, then the values from the All
Keygroup PEB will be pasted only into keygroups of the owner program that
are set to output #8; if "PASTE NOT" is highlighted, the values will be
pasted into all keygroups _except_ those that are set to output #8).  The
same message box will pop up with the message "Pasting...".  As each
keygroup is examined, a "+" will appear if the paste occurs, or a "-" if
not.  If Conditional editing is off, you will see only "+" symbols since
the values will be pasted into every keygroup of the owner program.

Note that two parameters, "Keyboard Tilt" (which controls the loudness of
all keygroups as you play up the keyboard), and "Positional Crossfade"
(which allows overlapping keygroups to fade in and out) are NOT
keygroup-specific; If either of these parameters are in the All Keygroup
PEB, they will be pasted into the owner program _regardless of any
settings of the Conditional PEB_.

Edits are pasted one at a time into every keygroup.  The "+" and "-"
symbols will cycle through each keygroup for each edit.  This process may
take a few seconds if the program contains many keygroups and there are a
lot of values in the All Keygroup PEB to paste.

Quick-clearing the PEB's:

**Similar to the small KEB boxes, <Control>+<Alt>-clicking on "Copy",
 "Cond" or "All" will empty the respective buffer, with no warning alert
  or undoing possible.  This feature is available only in an active KEB.

Comments:

Clicking on this box (underneath the owner boxes) opens up a message box
allowing you to type in a short line of text.  If the current KEB has no
comment, you'll see a text cursor at the beginning of the line and you can
start typing.  If a comment already exists, you'll need to click
somewhere on the comment line to place the cursor there before you can
enter or edit text (or, pressing <Clr/Home> erases any existing comment
and puts the cursor at the beginning of the line).  Existing text will be
"typed over" by any new text you enter.  The <Insert> key opens up a space
at the cursor location (existing text is pushed right; text at the end of
the line is lost).  The <Delete> and <Backspace> keys will do their thing,
and the arrow keys on the ST's cursor pad move you through the text (left &
right arrow keys move back & forth; up arrow puts you at the beginning and
down arrow at the end of the line).

Pressing <return> or clicking the mouse anywhere outside the message box
exits.

The S900 Companion has a fair mount of code devoted to writing its own
comments!  This feature is designed to help you keep track of which main
page program/keygroup the current KEB is linked to.  Whenever a keygroup
from a main page program is copied into a KEB, the comment line will
contain its owner (Current or Composite), the owner program's name, and the
number of the keygroup the KEB is linked to.  If you leave this comment
line alone, the S900 Companion will automatically update it to keep it in
sync with whatever you do on the main page.  If you edit the comment line
in any way, though, it will remain as is no matter what you do on the
main page (unless you clear the KEB, or copy a new main page keygroup into
it).

OTHER STUFF

The "S900C.DAT" File:

When you quit the S900 Companion, the standard "Are You Sure" dialog will
have an extra button marked "Save.DAT".  Clicking there saves a file called
S900C.DAT before the program terminates.  Essentially, this is a "snapshot"
of all the data in the S900 Companion.  The program looks for this file
when it runs, and automatically loads it if found, restoring everything
to where it was before you quit.  This feature is designed for when the
program is run from within a sequencer.  Many sequencers have the ability
to run a different program from within them.  Two examples are Dr T's
"MPE" and Barefoot software's "Hybri-switch".  The disadvantage of these
systems is that all data in the different program is lost when returning to
the sequencer.  By saving this .DAT file, you'll be able to switch in and
out of the S900 Companion from your sequencer, other program (or even the
desktop!) and retain the following data:

--Both the Current and Composite programs, and their keygroup selection
   statuses.
--The contents of all ten KEBs, their owners, and link statuses.
--Comments for the ten KEBs.
--The contents of the three Parameter Edit Buffers.
--The Conditional Edit settings (the "master switch" and individual
   enables for the Copy Parameter and All Keygroup PEB's).
--The current basic midi channel (the channel check-marked under the "Midi
   Chan" menu.

The S900C.DAT file is saved to the directory path specified in the
"Preferences" menu option (setting this path to a ramdisk will speed things
up considerably and is recommended).  As soon as the file is saved,
you'll quit the program.  If a file selector appears, it means the disk
doesn't have enough room to store the .DAT file.  Use the selector to
change to a suitable disk and directory and click on "OK" (it isn't
necessary to enter any file name). The .DAT file will be saved there and
you'll quit the S900 Companion.

**If you click on "Cancel" in this file selector, it's assumed you don't
  care about saving a .DAT file and you'll exit the program immediately,
  losing all your data!

You can load a .DAT file at any point by selecting "Load .DAT File" under
the "File" menu.  This would need to be done if you had to save the file to
a different disk/directory than specified in the "Preferences" option as
described in the previous paragraph.  Of course, loading a .DAT file will
overwrite _all_ current data in the S900 Companion (selecting "Cancel" in
the file selector aborts but as an extra measure an alert box will confirm
the load).

The automatic loading of the .DAT file can be disabled by holding a
<shift> key while the S900 Companion boots.

Online Help:

Pressing the <Help> key (on either the main page or the keygroup edit
page) brings up a message box with a list of help topics.  Use the mouse to
select one, or click anywhere else to cancel. The help feature uses this
doc file; the S900 companion will look for this file in the path specified
under the "Preferences" option, described next.  If this file is not
found, a file selector will appear; change to the proper disk/directory
and click on "OK").  Some of the topics use more than one screen; you'll be
prompted to press the arrow keys on the ST's cursor pad for these.  As
indicated, pressing <Esc> quits help.

Preferences:

Selecting this menu item (under the "File" menu) brings up a dialog box
letting you choose the directory paths for the various S900 Companion
file types.  The selected paths, along with several other parameters, can
be saved to a file named "S900C.PRF", which the S900 Companion will look
for and load when it's run.

The three paths shown are:

--Program/PEB Path: The S900 Companion will use this path to load and save
  .S9P (S900 program) and .S9E (S900 edits, for the PEBs) files.

--S900C.DOC Path: This should be the directory containing THIS file, which
  is used by the on-line Help feature.  Setting this path to a ramdisk
  (and copying this file to it, of course) will speed up the Help feature,
  since portions of this doc file are loaded each time a help topic is
  chosen. (A hard drive is pretty quick too, but if you only have a floppy
  drive you should consider using a ramdisk if you're accessing Help a
  lot).

--S900C.DAT Path: As detailed earlier, setting this path to a ramdisk will
  make using the S900 Companion from a sequencer much faster, since the
  .DAT file is loaded & saved each time you enter/exit the S900 Companion
  from the sequencer.

To change paths, click on the path name and a file selector will appear.
Move to the disk/directory you want, and click on "OK" (it's not necessary
to select a file) to set this path as current, or "Cancel" to keep it as it
was.  If a path is more than a few folders deep, the entire path name may
not be displayed.

Clicking on the "Save" button creates the S900C.PRF file and saves it to
the same directory that the S900 Companion was run from (a previously
saved S900C.PRF file in this directory will be overwritten).  From now
on, the paths specified will be set automatically everytime the program is
run. Click on "Exit" to get out of this dialog box.

The current Conditional edit settings (master switch, and individual
enables for the Copy Parameter and All keygroups PEBs), along with the
current basic midi channel, are also saved in this file (note that, since
the S900C.DAT file also includes the basic midi channel, and is loaded
after the .PRF file, the midi channel specified in the .DAT file will take
precedence).

Using desk accessories:

The S900 companion is programmed in GFA Basic 2.0.  This programming
language makes a lot of things easy.  Using desk accessories isn't one of
them!  Unfortunately, I am not knowledgeable enough in the area of GEM
programming to incorporate the use of desk accessories in a "pretty" way.
Rather than disable them, however, I've left them active.  You'll see what
I mean when you use one:  The screen will be corrupted with the desk
accessory.  What I've come up with to deal with this is a simple way to
re-draw the S900 Companion screen when you're finished with the accessory:
Simply move the mouse to the BOTTOM of the screen, and click.

THE OUTPUT MAP PAGE

Choosing "Output Map" under the "Edit" menu takes you to a page where a
program's output routing is graphically dislayed and available for
editing.  This page is best suited to help work with programs that use the
sampler's individual outputs; the fact that they're monophonic make for
some tricky keygroup assignment when more than one keygroup share an output
(anyone who's used the S900 for drums knows all about this!).

Of course you can view a program's output assignments if they use the mix
or left & right outs.  It's highly unlikely that a program will contain
keygroups assigned to BOTH individual and mix/l&r outs, but if such is the
case, an alert box will ask you to choose the desired display.
